var x=Object.defineProperty;var W=(r,e,s)=>e in r?x(r,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[e]=s;var i=(r,e,s)=>(W(r,typeof e!="symbol"?e+"":e,s),s);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const A of document.querySelectorAll('link[rel="modulepreload"]'))t(A);new MutationObserver(A=>{for(const o of A)if(o.type==="childList")for(const n of o.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&t(n)}).observe(document,{childList:!0,subtree:!0});function s(A){const o={};return A.integrity&&(o.integrity=A.integrity),A.referrerPolicy&&(o.referrerPolicy=A.referrerPolicy),A.crossOrigin==="use-credentials"?o.credentials="include":A.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function t(A){if(A.ep)return;A.ep=!0;const o=s(A);fetch(A.href,o)}})();class R{constructor(e){i(this,"props");i(this,"godModeButton");i(this,"shieldsOnButton");i(this,"isDevelopment",!1);i(this,"init",()=>{console.log("current env: ","production"),!this.isDevelopment&&this.godModeButton&&this.shieldsOnButton&&(this.godModeButton.style.display="none",this.shieldsOnButton.style.display="none")});this.props=e,this.godModeButton=document.querySelector("#god-mode-button"),this.shieldsOnButton=document.querySelector("#shields-on-button"),this.init()}}const g=(r,e)=>{if(e){const{alignment:s,fillStyle:t,font:A,text:o,x:n,y:h}=e;r.fillStyle=t,r.font=A,r.textAlign=s,r.fillText(o,n,h)}};class S{constructor(e){i(this,"props");i(this,"gameOverMessage","");i(this,"isGameOver",!1);i(this,"drawGameOver",()=>{const{context:e,gameWidth:s,gameHeight:t}=this.props;e.fillStyle="rgba(0, 0, 0, 0.7)",e.fillRect(0,0,s,t),g(e,{alignment:"center",fillStyle:"white",font:"48px Arial",text:"GAME OVER",x:s/2,y:t/2.2}),g(e,{alignment:"center",fillStyle:this.gameOverMessage==="You win!"?"green":"red",font:"24px Arial",text:this.gameOverMessage??"",x:s/2,y:t/2.2+50}),g(e,{alignment:"center",fillStyle:"white",font:"18px Arial",text:"Click anywhere to reset",x:s/2,y:t/2.2+100})});i(this,"setGameOver",e=>{this.isGameOver=e});i(this,"setGameOverMessage",e=>{this.gameOverMessage=e});this.props=e}}class Y{constructor(e){i(this,"props");i(this,"score",0);i(this,"drawHighscore",()=>{const{context:e}=this.props;g(e,{alignment:"center",fillStyle:"white",font:"bold 15px Arial",text:"SCORE ",x:40,y:20}),g(e,{alignment:"center",fillStyle:"white",font:"bold 15px Arial",text:this.score.toString(),x:80,y:20})});this.props=e}}class b{constructor(e){i(this,"props");i(this,"drawLives",()=>{const{context:e,gameWidth:s,defender:t}=this.props,A=t.lives.toString();g(e,{alignment:"center",fillStyle:"white",font:"bold 15px Arial",text:A,x:s-80,y:20});for(let o=0;o<t.lives-1;o++){const n=s-65+o*30;e.drawImage(t.image,n,3,20,20)}});this.props=e}}const G="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAACXBIWXMAAAsTAAALEwEAmpwYAAAHXGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDggNzkuMTY0MDM2LCAyMDE5LzA4LzEzLTAxOjA2OjU3ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjEuMCAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDIzLTA1LTE4VDA0OjA0OjAzKzAyOjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDIzLTA1LTIxVDIwOjA1OjMwKzAyOjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyMy0wNS0yMVQyMDowNTozMCswMjowMCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpiMmU4NDYwMC1jNjI5LTM3NDItYTlmZS1hOWM2YjM4OGViYmIiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDo0ZWUyNzlmNC1jNzliLTk1NDYtYWEyNi01NWMyYjI2ZmViMDQiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpjN2EwZGVkNy03YjdhLTM0NDItYWQ0NS1jYzFkZWI0NmVkNDEiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmM3YTBkZWQ3LTdiN2EtMzQ0Mi1hZDQ1LWNjMWRlYjQ2ZWQ0MSIgc3RFdnQ6d2hlbj0iMjAyMy0wNS0xOFQwNDowNDowMyswMjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDIxLjAgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDphOTA5YzlkMi0wZTMwLTdiNDItOWI5OC1hMjIzODUyYTlhMzYiIHN0RXZ0OndoZW49IjIwMjMtMDUtMThUMDQ6MDQ6MDMrMDI6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyMS4wIChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6YjJlODQ2MDAtYzYyOS0zNzQyLWE5ZmUtYTljNmIzODhlYmJiIiBzdEV2dDp3aGVuPSIyMDIzLTA1LTIxVDIwOjA1OjMwKzAyOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjEuMCAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDxwaG90b3Nob3A6RG9jdW1lbnRBbmNlc3RvcnM+IDxyZGY6QmFnPiA8cmRmOmxpPmFkb2JlOmRvY2lkOnBob3Rvc2hvcDo0ZWUyNzlmNC1jNzliLTk1NDYtYWEyNi01NWMyYjI2ZmViMDQ8L3JkZjpsaT4gPC9yZGY6QmFnPiA8L3Bob3Rvc2hvcDpEb2N1bWVudEFuY2VzdG9ycz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7GEJs+AAABBUlEQVRoge2aMQ6CQBBF/5otLL0AVFpqxZU8lVciege4gKXd2ghZVwIqs/AzmVeREHb2MTObIcGFEKCBzdobkMJE2DARNtSIuP31mG3xtm7Ss90VVZklVvaMFFWJXJuPUVNaXnrBgXKKCW3ddNeiZSaakVQi3ujApmOp2YhnZOwtx/fausHjfAcAHG6n2XHV9IgaEfHS+oXtZQdgvBy/RU1GVhXpml0Cy4gEXY9IoCYjb6fWxHiRg/CK++/z/ZjzcfwuMalKxEnl1ZSWGhG/Ql9I0k/QHliuLyRJJ2k1pWUibJgIGybChomwYSJsmAgbJsKGB2Z9/NPg7BcOMkyEDRNhQ43IE/r/PxbElTYPAAAAAElFTkSuQmCC",M="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAsCAYAAACHUEHxAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ4IDc5LjE2NDAzNiwgMjAxOS8wOC8xMy0wMTowNjo1NyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDIxLjAgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjY0RDEwMzNCMTM2QzExRUU4NkY3OTZENzlBMzU2QzM0IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjY0RDEwMzNDMTM2QzExRUU4NkY3OTZENzlBMzU2QzM0Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NjREMTAzMzkxMzZDMTFFRTg2Rjc5NkQ3OUEzNTZDMzQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NjREMTAzM0ExMzZDMTFFRTg2Rjc5NkQ3OUEzNTZDMzQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6BnJ69AAACk0lEQVR42uxcPU7GMAxtUAZGLgAbKxISV+JUXAkJiZUNLsDIFr6ir1Lp1zZOYqd28t6ChGjjus/PP0lxIYRBEtcvN3sLuJ/n7wFoD77GIrdPdxe/+3r9hPdBLMCKCmuxDcRqUIU12HYFigBQrM7S6iltOaupH8RC6hKxEakQsJsKMVoAsSTg1mTUOuE0267BNihWZrDAtuOJFWJOoHZGVraHsI2laEuH2nVo6KBixDgR6zA7pUibajvGDYBIesW4AbCbCgvrlQFHa3hruch1LHUhUqHx8UBuLbc1AuKyzUtHB5Bfv1hWa18jOjgjw8pMrPfdBtFUOEYcc9fhjPiVbKclRUrJWqLEGhdKIBcXSYtx//bw9/Pj8R2JOjNrqSjeKVFbM7JLCRXrxjaCpKk69WhiBYISubPyibfImiJeupaTrgG9JgfHHl66RdbSIROCaFrDZdy7Sq3KQqyYI6l7fi3WGtyBZ6XbTCJW5kOtRUcYANGAHlUvpSvnLhtSiLV5YO/8ACGRXIDCcoPr730sp8/PQ8Vuupce5hFRc3TQKOZqVLNJIQuEj5Fi2lagnEEC5BuL+XvSXG+RUqH2PasNBweF8yIzJUFp50silpHB3fKlhaUKc0Z4D3uBJZ0vjs1UVJ6eToAkEStj+h1LS6zXamoQCnwl6ttaSpusWKmDzZJBqNYhKlV5pO0vuH+9yTu+Vu4HU2BIqrq31q1IpQ4t/9lFg/JyEK7J4n1yTO53ia0fw578k7PHS/HRGKR+bYHlRUaGn0slKtqjpLbaFYt0Vl8t3uu/YDkfU3IlPvLWCmeKrTn1YskQuDdfdZsKt2oIbDvxdb4xX+JLaEAEIBYAYgF24HNaTcuQ+DC21+Hy3nP/CjAAkP91RszS5jcAAAAASUVORK5CYII=",D="/space-invaders/assets/explosion-4FMMjE7o.wav",J="/space-invaders/assets/shoot-SCjv8snc.wav";class C{constructor(e){i(this,"props");i(this,"shoot");i(this,"destroy",()=>{});this.props=e,this.shoot=new Audio(J)}update(){this.props.direction==="down"&&(this.props.y+=this.props.speed),this.props.direction==="up"&&(this.props.y-=this.props.speed)}draw(){const{context:e}=this.props.game.props;e.fillStyle=this.props.color,e.fillRect(this.props.x,this.props.y,this.props.width,this.props.height)}}class N{constructor(e){i(this,"props");i(this,"checkGameOver",()=>{const{defender:e}=this.props.game,{game:s}=this.props;return e.lives===0?(s.gameService.gameOverMessage="An invader shot you! You Lose!",s.gameService.setGameOver(!0),s.inputHandler.destroy(),!0):!1});i(this,"animateFrame",()=>{const{game:e}=this.props,{defender:s}=this.props.game;e.gameFrame%10===0&&(s.frame=s.frame>0?0:1)});i(this,"handleHorizontalMovement",()=>{const{inputHandler:e}=this.props.game,{defender:s}=this.props.game;s.isCollided===!1&&(e.keys.includes("KeyD")?s.speed=s.maxSpeed:e.keys.includes("KeyA")?s.speed=-s.maxSpeed:s.speed=0,s.x+=s.speed)});i(this,"handleShooting",()=>{const{inputHandler:e,defender:s}=this.props.game,{game:t}=this.props;e.keys.includes("Enter")&&t.projectiles.defender.length===0&&s.isCollided===!1&&(s.reload||(t.projectiles.defender.push(this.fire()),s.reload=!0,s.timeout=setTimeout(()=>{s.reload=!1},200)))});i(this,"preventGoingOffScreen",()=>{const{defender:e}=this.props.game,{game:s}=this.props;e.x<0?e.x=0:e.x>s.props.gameWidth-e.width&&(e.x=s.props.gameWidth-e.width)});i(this,"fire",()=>{const{defender:e}=this.props.game,{game:s}=this.props,t=new C({height:10,width:2,speed:10,x:e.x+e.width/2-2,y:e.y,color:"#00d300",direction:"up",game:s});return s.playSound&&t.shoot.play(),t});this.props=e}}class U{constructor(e){i(this,"props");i(this,"width");i(this,"height");i(this,"x");i(this,"y");i(this,"speed");i(this,"maxSpeed");i(this,"timeout",setTimeout(()=>{},0));i(this,"reload",!1);i(this,"image");i(this,"explosionImage");i(this,"lives",3);i(this,"previousAnimationSpeed",0);i(this,"isCollided",!1);i(this,"collisionPause",0);i(this,"frame",0);i(this,"spriteWidth");i(this,"spriteHeight");i(this,"defenderDeath");i(this,"defenderService");i(this,"update",()=>{this.defenderService.checkGameOver()||(this.defenderService.animateFrame(),this.defenderService.handleHorizontalMovement(),this.defenderService.handleShooting(),this.defenderService.preventGoingOffScreen())});i(this,"destroy",()=>{clearTimeout(this.timeout)});this.props=e,this.width=42,this.height=40,this.x=50,this.y=e.game.props.gameHeight-(this.height+10),this.speed=0,this.maxSpeed=5,this.image=new Image,this.image.src=G,this.explosionImage=new Image,this.explosionImage.src=M,this.spriteWidth=75,this.spriteHeight=44,this.defenderDeath=new Audio(D),this.defenderService=new N(e)}draw(){const{context:e}=this.props.game.props;this.collisionPause>80&&(this.isCollided=!1,this.x=50,this.props.game.invaders.animationSpeed=this.previousAnimationSpeed,this.collisionPause=0),this.isCollided?(this.collisionPause++,e.drawImage(this.explosionImage,this.frame*this.spriteWidth,0,this.spriteWidth,this.spriteHeight,this.x,this.y-3,this.width+2,this.height)):e.drawImage(this.image,this.x,this.y,this.width,this.height)}}const Q="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEMAAAAqCAMAAADf7xbTAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ4IDc5LjE2NDAzNiwgMjAxOS8wOC8xMy0wMTowNjo1NyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDIxLjAgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjFFQjkzOTJGMTM0QTExRUU5Njc0OUY2OTA2M0UxMzZDIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjFFQjkzOTMwMTM0QTExRUU5Njc0OUY2OTA2M0UxMzZDIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MUVCOTM5MkQxMzRBMTFFRTk2NzQ5RjY5MDYzRTEzNkMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MUVCOTM5MkUxMzRBMTFFRTk2NzQ5RjY5MDYzRTEzNkMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6zWk7IAAACGVBMVEX///8RERHq6up2dnZiYmITExNKSkqAgIDi4uIzMzMoKChbW1v29vYWFhbNzc3R0dGFhYUyMjJTU1NERETExMQ8PDxmZmaTk5ONjY3x8fE6OjrFxcWqqqre3t719fXu7u6enp74+Pirq6uXl5fc3Nz7+/vk5OSurq7W1tYXFxdAQEDLy8vp6ekxMTHU1NS9vb0UFBRkZGQ1NTVYWFi3t7d0dHR/f3/v7+8/Pz8QEBAZGRnKysofHx9aWlqlpaX09PTm5uZXV1c7OztZWVkcHByQkJBGRkYqKir5+fnMzMwLCwsJCQn8/PySkpLDw8PAwMDy8vIPDw9WVlYNDQ0vLy94eHhCQkJ6enr39/chISEiIiLBwcFra2u+vr4nJydsbGwaGho9PT0KCgo+Pj6ioqIjIyMmJiZvb29HR0ejo6O4uLi/v782NjapqamhoaHY2NgeHh5wcHCEhIRFRUU3Nzd1dXUVFRUbGxuRkZEICAh3d3eoqKh8fHxfX19jY2OGhoaCgoLIyMhDQ0Pj4+Pr6+sODg6UlJTGxsa7u7vw8PC0tLSKiorz8/NOTk5nZ2cSEhLS0tLPz8/V1dXo6OiZmZnOzs4YGBiYmJjJyckrKystLS2xsbFpaWlNTU15eXlBQUFgYGA4ODivr68gICCIiIhVVVWOjo4MDAyysrK6urq8vLzn5+cwMDCdnZ0sLCw5OTl7e3uPj4////9ic1e1AAAAs3RSTlP/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////AA8pv+gAAAKfSURBVHjaxJZnVxpBFIYXFRAMIkI0aowxVWIFa1RQQ0yBNIEUCNh716jpvffee+9tfmHmHQKEXVZ3z4nJ8+nOLQ8LZ3YGjvB5btYC31levpOle8sEA4QTZNaqObCZ31zP0lkZ8+aoNwCtXIfzEca+7GeOE6vAK7kOcx3GxtqYYysrbuM57r7WUZROmvHMIPzGc9QmY71jZzyH5+pyMJAJfrTSzPBxhF9HkP7ZJcXxm5QFyBbUICxiHdbYBgkOm8ChiW1oDzkOMYdlNfiwCEz3SnBoWOu5Sxizp/+xPyysr2SNBEcTW3IbBHuM72i6mE/Rd9DQcRphvkG2497LbIpBiV9vGGG2QrZjFkQdjmRw0rIQ6ESmfaw6/Zn1dgkcPemgckgPOkQcT26ieqGP9baLvLfGAvaYKhFH1RZU64pnfff/n8ORFME2I9kxHp1K6uduJES41Uq8zcuARsThHkH1jZ/URKcSDnONXISijcSpUAKniMPDqopOYoxOcRU8h1Tm3XFtKbCJjD5D8c5bviOQGKHNTEj3SvBOxDGE4pVJQvzRqUQ3/36xM3WziGMvinvS5rij/qrjvQK0HKQ5VwuLXXM6XKxPN7oEXCYkMJZLsV+nJe9jhLnfCfmIYt5kSO8SOMqCOZTBFxowTsjuTfjMUpxj1kL2cLsI0aJonUBnTqZZ4DCzM7i6PLyO6whRyZbb1/8TxxGBwyjD4V4MTKngPg7zh90s/oT06L64jtqnKZRjqSbKIG0J3ftBweZoCN/7DnSaKjIwpgo5ps7nURqPFlO8urCjVODIiv3vcOA2xoIhx7oSFBsiN4uYozrWoWZfvlCe44wMx8QKMCBwPEBaXy7JoVWBKYHjFNL9vrgOf18apaqHyMOoxliARr8EGACDXsBbedFuJQAAAABJRU5ErkJggg==";class Z{constructor(e){i(this,"props");i(this,"image",new Image);i(this,"width");i(this,"height");i(this,"lingerCount",0);i(this,"draw",()=>{const{context:e}=this.props.game.props;this.lingerCount++,e.drawImage(this.image,this.props.x-2,this.props.y-2,this.width,this.height)});this.props=e,this.width=35,this.height=25,this.image.src=Q}}class L{constructor(e){i(this,"props");i(this,"explosions",[]);i(this,"add",(e,s)=>{const t=new Z({x:e,y:s,game:this.props.game});this.explosions.push(t)});i(this,"draw",()=>{const e=[];this.explosions.forEach(s=>{s.draw(),s.lingerCount>=20&&e.push(this.explosions.indexOf(s))}),e.forEach(s=>{this.explosions.splice(s,1)})});this.props=e}}class k{constructor(e){i(this,"keys");i(this,"game");i(this,"keydownHandler",e=>{e.preventDefault(),(e.code==="KeyW"||e.code==="KeyA"||e.code==="KeyS"||e.code==="KeyD"||e.code==="Enter")&&this.keys.indexOf(e.code)===-1&&this.keys.push(e.code)});i(this,"keyupHandler",e=>{e.preventDefault(),(e.code==="KeyW"||e.code==="KeyA"||e.code==="KeyS"||e.code==="KeyD"||e.code==="Enter")&&this.keys.splice(this.keys.indexOf(e.code),1)});i(this,"destroy",()=>{window.removeEventListener("keydown",this.keydownHandler),window.removeEventListener("keyup",this.keyupHandler)});this.keys=[],this.game=e,window.addEventListener("keydown",this.keydownHandler),window.addEventListener("keyup",this.keyupHandler)}}const E="data:audio/wav;base64,UklGRlUNAABXQVZFZm10IBAAAAABAAEAESsAABErAAABAAgAZGF0YTENAACAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQpJFvX1tkan6GbG17oJ52ZZC9bk+aynUQYNC7QWTAr10Aav2JEYzyZwGG/4YEbuZ2AZX/WQag/24APLH/URvPqis9yLMXaPVwC2bS2SdJ7XIdOa3/WwCR/4oKPqv8VACs9C4vz75KAI3/kxBBv9ceVOCjTgCA/3wAlf9mAIr5qT8Apv8+GMPlIU7go0YAkf9kAKH/XACj/18Ahva/TQB9/4IAWMbiXwB6/54rNdWyFWPWyDEnxtZLAIP/hgZo27MSaftoBGrkzC0zufdMALL0JzTH3FUAaf+2I2P+YAB2z/NUAIn/fACM/XkrE6L/kw88tP8+GsTeWwCH/2AAsv9MBrP/UACm/2wAbv9cAHrk1zkYtfxLAHb/hgGF1rxBAKP/XwCP/34iMMH/QRbQyTIf0ccqRr77OQu+3VcAjP+BG1jRyjYcuvteAJD/UgS+/zwTytwqN9S6I07dqRtf1b1LAJL/cQCp/1MAdvGkGWvK1E8Ahf+ZKj7YpAeU5Zo2ALn/QQnF6DYivfRQAHHu0iha1p8zAsXaOx/A/0YIqP96AHXrXAeC6rwQfOV5Lg+y/2gAjv9XAJz+gxlk1LdABqT/awhhs/9jAHnlmyxX1rU8I6//dw8yp/9iAKvxcQ5h7n8Tn/xbAKL7fhVm1Kw+D67/WgCj5akxDr3nTgCT/38feN2UJFbjfxSD18MmRs2yQgCn/2cFi9evSQCw/3oPaNWkRACz/0kWxfVBAK//WACn8nQnKcbyQwyr/2kAleCOHVjDxj8AwPFCCrT/WgCx+j8Yv+xVAIf3Yh2G3sUyNMjROhPE5jsUr/9nAJ7vUACU0c5HAMDqOBy9/1UAle2HMyau/1wAkdOWPwe9/z0RuP93FTS28D8AvvVWBH7lqT43w/Y3DcDzQQC1+3YqJrv/RAC6/4MtHbb/UwCU07tRALX/VAme8FsLtfljE3XlayF5184mV9WZLy/TsSB34YAYkexbH3nQ1z0Atf9VAqXkYxxc1cInbNOkQgC9/20qNcrjPhSz/2MUYcDbOwG+/1QXU7r/PgC/7EIAwfI7HNDUOB61/0EIxt0uH8zLKj/VsDUxwvs8Bqf2XBOFx9M8AKr8fiBo0ZUpUczAKkranzFJwfpOAKrrQw+x/FcffsPzRAC05kAInvKCKG2/30AAquSXLybI1T8AmPOnJ3zeaTYrvv85Dq/rjhxbwqsuF8nwRQeP75Eine5PKVa+/zsAv+pwKCvF+DkDwv9GEb/oUw1r0b42KdHZNBnN7zYUwPtxHSu+/TQAkeulIoXgdCFe1KUhY+ZtF7bpbiBq2pQegOhWD7/wYCpJyfwtBtDuNQCd94IpaL7zKgCw3owsBsn/OQCp2K8xENnLIEjVuS0z4rAkWcn6RQCx4zUVmPWVJ17I+jsAhtiSG5DgeS0u1vAfQOGdKFvNzisQ1P5LAKDsTiV219cjRNHELgLR8TwBrvlQJovV3SsAtvKGFGTNoTEF0f8sIt/bLBW7/0AZiOGoD4bMiyIk0tsyBtjtIjrR3jUAvOaMJEHjjilW2tMdUtqlJTPO7yID3NYpIcv/NgSs6GIZkdSJHF3RrSoX4M8bXtuzMgbG/2Eald5cImfU1Ccb0/xFAKDhWR6E26MlS9rDJyTkxCBU4pgZgtGXJzDkpyhF0fsmFtbgIwKq8WgaocyyKQDP+loXduBwIZDeiTM1zv43BLfWhC4F1f8qHqznpyAt1coRVuNxMVXV/B0g5b0oIL/+Uw2l3EkjbN7QIj/b1SMOw+uJKwDJ/y0in+WhHlPcoik2zfgmE7Hgqh8Z4sYfR9fsJgDO7TQf2NkiFtr5ShCc3j4c2PFEEY7cWRO/41EqVM//IwC0z50hM9+0Jiri5hc/3rwoCc3/Qi1r0fwaANXjVBKM1YQzGND/QSfV3igac9fyGxXg4TALm+V7L3fcqBd51IEuGcz/TR2qznwuGMr/PyXQ2y4Rpt9bI7PkRimH19YWFObAHFPWvx4g488eR+WpKD3H+EYTmc17Kk7dwRZo0akqBtf2OinL2i4RwN1JKYfjmi1LyvI7DK3JLSyV6KsoSNDmGwrXyyYt2eIeH9nSJBrK34YtIuPVIEHdwiQvxudzGF3FqiA25LMsOMbugCwn1eMXLNrULhSj3Gg9ZdT1KxpqyeweD9XaNy561ssYSdejJULgripFxutcKlTI4hsX1NFBJpfZYi280l49RtLyQS9Jy/cbJpHO2x4Qm+CYLHTLsSUcxuNSL5nHeyxn24IqqcV4NCm871Axtc5ELaPEpiMl47QpXN2qKWXTrC4ox981PIrathtqyYIxMbzqcy6Jy1gxrsR3NUHS0h8gwtZIM8bHMiun0E8yvM1VMYjBoCsh2dxPN2fOxyQx270pTNXGJCa32GM+WcrqLyinxl4ttsJaPEXW2ixN0rwhLYvVzSQy2b8qK7nXWkVkzNwiPdC6KSWozoA5cc2sKUTcozJTztcwKaLCfD5GvuBBO824KTTQxz0xkcpwPZPKji9pzJMtZM+cL1nOsCFqzXRAVcXaPjt8yLMhXM+JMW7Cqig726gvXc66JzSV1bglQtG/LSrKuDJJheC6I3C/li0qyc5GPqDCdjxpz6wuQ83DLEjOtSwxtchrQnTGriszpNh5M6+zWT1f0p41ZM26JzOpzndBWLfTOzzIsDs9dMu+KUvUsS47xcRBRKTDaTmotVdCbcm/KDPAwnhAUM3LMjbDtk9JY9K+MlPLwC04rrxWQcSwLk/QqTFEwcZkRlTKxyxBfc+1M1HIvi88rLhUQ7y5VEGQw2tJb8LOPD2VuG88p7FoRVDOwDpPx603U4zNrx0vtbhOU2bDzDZJa8a7L06QzYI8Xr3BQkFyxJg0h7aJOkTPxE5FmrZdSZ27aE1nts9FSMCqQD+msVpVabzMQ0vGq0BMaMbLQUl5vrErSJ3FpzJByqRCWJHSij9fuL5KRG+/uCpHyaw5UpXGri9Au7RHV8GfOFLDrT5SuLNLS5y4aEWUtWlKdMCyMkiot2FMi7KWM1zEmTdQw7dBV8OTQlmnv2hMbL+iNVK9skNPdcK9MEaWuXRFoaZrTlnEuTlWwKQ+Uqm2YEydqnlBcr11TmyrxXQ8c7R9R2G9tTxZw6I/TJW4eEaiqFBUm7hpUG6vuERTlrGYMUe7r2BPYbi1R1Sqq1ZUg8CnNE2nsm9LW7O5V1GNs3JTba28VVJwuqo3W8CjPE6dtW1UirmVPVOrtnVKWMGuQ1Z4v7Q0VaiuWlK0nFVVb8GkQWOtsGtHYLuiQWK4o0hauaVIU5yve0l0vYVQc7yfO1aFxZ0/bbadOlKdsnlLXJXCg0RXn7ZqTXmzh0prtKBBW6mpaE5js61JX7mgSlmAtqM5Xb6fRlavn1JikrqZP1O0plZYkKt5Umq4pEpdnatoVIG1lEBcisCmN1e4mEZdn7BpWJugclB8tXpSf7OWQlitq1del6uFRWq5g01njcWJSX+nhEZWo7FpWYarhUpquo9NaaymT1iOqnpQaZK+h0dfrpxJYn66n0FajbKLS2WtnEpinKh7S3Owj0VluZFLareVS2GgpGBgp5plUoymZGR3n7NcXoKwmz9WnaRoXIWvj0hmqpZVY6OlZFtwlbl1UIGib1eMpG9cjqOATnGwjUxiraJqW3KzlEppo6NkWZGZY2SIsX9Wcoq4iUVeo6BdY3qxnEhelqRtYIirg1Jpk69pW5eWaGBrkrh2WJCYbF93sZVIZnywpVRgiKWCUGyrl1JojaqFU2eWrIJRZKmdYmNxqZ9Va5aieFdwq5dNZ6mQXWaLsnxec4W1hk1mopldX3KmllBpkaNyWpKTZGWDq4pPa4CymE5fh6OCVnOnj1hsmp51WWyqmVlmmJRwY3Gtklptj6p5WWyPq4JSbKqLUGuCrZ5Van+pmVBllJptZIigeV51o5NdaZGgbmR3oJ1gZ3Wok1Fpi6WIVmeemmVpk5xzYnScmVtroZFdbXSTrmpqdoqoa1+JlXRgcqOUXWuFo4tTaaCTYG6ZkmlpdY2thVRxo4RWbX6llWFsf6aSUWySimdrmZBobYSkgmF0mJVmaoGkiVNpjaB9YG6Mp3lldJuRXmyHn4RYbIqlgl52oIlbbIqcgmFyoI9bcJaNZm2WkWhslo5tbH+jiFtuhqGEYHCUlW9lgpl9Y3GJqIhabI+Yc2p9mYpdepp/Y32ed2d0iqd6YXOVkWlsiJJxbXaFrIVdbYuWcWyGk4BhcJeTaXN+jplra3qUk2Vsgpl/ZXiUi2pxf6CLYW2ImHtpfpqKXm+LlXtpd5iPam6HknppdpmPbHF0kZFpb3yZh11yloZmdXyUlm1we5eKYHB8mI5pcH2ahWZ0fpqRbG9zjZZudHqFnnNvgA==";class u{constructor(e){i(this,"props");i(this,"spriteWidth");i(this,"spriteHeight");i(this,"frame",0);i(this,"currentDirection","right");i(this,"invaderDeath");i(this,"moveLeft",()=>this.props.x-=this.props.speed);i(this,"moveRight",()=>this.props.x+=this.props.speed);i(this,"moveDown",()=>this.props.y+=this.props.height);i(this,"updateInvader",e=>{const{gameFrame:s}=this.props.game;if(this.currentDirection!=e){this.moveDown(),this.currentDirection=e;return}e==="left"&&this.moveLeft(),e==="right"&&this.moveRight(),s%this.props.animationSpeed===0&&(this.frame>0?this.frame=0:this.frame++)});i(this,"fire",()=>new C({height:10,width:2,speed:10,x:this.props.x+this.props.width/2-2,y:this.props.y,color:"white",direction:"down",game:this.props.game}));i(this,"draw",()=>{const{context:e}=this.props.game.props;this.props.image&&e.drawImage(this.props.image,this.frame*this.spriteWidth,0,this.spriteWidth,this.spriteHeight,this.props.x,this.props.y,this.props.width,this.props.height)});this.props=e,this.spriteWidth=57,this.spriteHeight=38,this.invaderDeath=new Audio(E)}}const j="data:audio/wav;base64,UklGRm4EAABXQVZFZm10IBAAAAABAAEAESsAABErAAABAAgAZGF0YUoEAACFhYCFgICFhYuFgIWFhYWFgIWFgIWAhYWFemNNNh8UCQ8aKzxYY4CLobjJ2uXw9v///////////Pzw6+Daz8m+uKecloWAenRpY1JSR0c8PDxHUl5YXmNYUkE2Kx8PAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAMPGiU2PE1SY296gIuWp62+ydTa5ev2//////////////////////////////////////////////////br5eDg1MnDuKGFb1I8KyUfJSs2QVJeaXR6hYuQlqGhoaehnJaWkIuAgHp0aWNSTUE2KyUaDwMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPGis8TV5vgIucrbLD1ODw/P///////////////////////////////////////////////////////////////OvPspaAb2NjaW96gIuWp7K+ycnU2uDg5eDg4NTUz8m+uK2hlouAemleWE1BNisaGg8AAAAAAAAAAAMJCQMDAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAw8aKzxHUmN0gIuWobK+ydTa5fb8/////////////////////////////////////////////////Pbw6+Da1MOti3pjTUdBQUdSXml0gIuWoa24vsPDycPJw8O+sq2noZaLgIB0aWNSRzwwJRoUCQAAAAAAAAAAAAAAAwMDAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPHys8R15jdICLnK24w8/g6/b///////////////////////////////////////////////////////////z88ODPrZCAaVhSWFJeb3qAkJytsr7Pz9Ta2uDg1M/Jvriyp5yWi4CAb2NYTUc2KyUaDwMAAAAAAAAAAAADCQkPCQMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPGis8R1hjdICLnKeyvs/a5fD8///////////////////////////////////////////////////////89vDl4NrUz8O+uLKtp5yWkIuFgICAenRvaWNeWFJNTU1HQUE8PDYwKyslJSslHyUfGh8aHxoaGhoaHx8fGh8fJSUfJSUfJSslKysrMCswNjY8Njw8QUdBR0dNTVJNUlJYWF5jaWNpaWlvb3R0dHp6dHqAgICFhYCFhYuFi5CQi5CWlpaclpycnJyhnKGnp6ehp62tp62nraetp62tra2yrbKtrbKtra2nra2nra2tp62traenoaehp6Gnoaehp6GcoZycnJaWnJaclpCQlpCQkIuQlpaQkJCLkIuFi5CLhYuLi4WAgIWAhYCFgICAgICAgICAenR0enRvb3RvdG9vdG9vdG90b290b2lvdG9vdG90b290b3RvaXQ=",P="data:audio/wav;base64,UklGRvoDAABXQVZFZm10IBAAAAABAAEAESsAABErAAABAAgAZGF0YdYDAAB6aVg8KxQPCRQfMEFeaYCQp7jD2uDr8Pb8//z8/Pb28Ovg2s/Jw7iyp6GQi4V6dGljWFJHQTY8QUFNUl5eWF5SRzwwJRoDAAAAAAAAAAAAAAAAAAAAAAAAAAAAAw8aHzA8R01eb3qAi5ansr7Jz9rg6/D////////////////////////////////////////////////26+vl4NTUycPDuLKnoZyWlouFgHp0b2ljXl5SUk1NQUE8KxQAAAAAAAAAAAAAAAAPGis8TVJjaXR0gICAgICAenRvaWNpXlhSTUE8MCslHxoUDwkDAwAAAAMJGiUwMDAwKyUaDwkAAAAAAAAAAAAAAAAAAAAAAAAAAw8aJTA8R1hpdICLlqeyw8/a6/b////////////////////////////////////////////////////////////////////88PDr4NTPw8O4raehnJaLhYWAgHRvaWleWEcrDwAAAAAAAAAAAAAJGiU2R1JeaW90dHp6eoB6enR0b29jWFJNR0E2KysfFA8DAAAAAAAAAAAAAAMJDxQPFAkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADDxorNkdYY296hZahrb7J1ODr9v////////////////////////////////////////////////////////////bw6+Da1M/JvriyraecnJaLgICAenRvaWNeXlhBKw8AAAAAAAAAAAMPHzBBUl5pdICFi5CWlpCWkIuLhYB0b2NeUlJNPDYwKyUaDw8JAwAAAAAAAw8aHysrJSUfFA8DAAAAAAAAAAAAAAAAAAAAAAAAAAAAAw8fKzBBTV5peoCQnKe4w8/a5fD8///////////////////////////////////////////////////////////89uvl4NrUz8nDuLKyrZyWlouAgIB6dG9jXlhYUk1HR0E8NjArMCslHxofGhoaGhQUDw8JDwkPCQ8JDw8PCQ8PDxQaFBoUGh8aHx8fHyUlKysrMDYwNjw2PDxBR0FHTUdNUlJYXlheY2NpY2lpb290dHqAgICAgICAhYCFi4uFi4uQlpCWnJaclpyhnKGcoaGhoaehp62nra2tp62tsq2yrbKtrbKtrbKtrbKtsq2tsq2yraenraetp6Ghp6GnoaGhp6GcoaGhnJacnJyclpycnJaQkJaQlpCWkIuQi5CQi5CLhYuLi4WLhYWFi4WFgIWAgICAgICAgIB0enR6dG90dG9vdG90b3Rvb3RvdG9vdG90b29v",B="data:audio/wav;base64,UklGRjYEAABXQVZFZm10IBAAAAABAAEAESsAABErAAABAAgAZGF0YRIEAACAgHReRzYfFAkUHzBBWGmAi6Gyvs/a5fD8/Pz///z8/PDw5eDUz8m4uK2hlpCAgHpvY15STUE8NjZHR1JYXl5eUk1BPCUfDwAAAAAAAAAAAAAAAAAAAAAAAAAAAwkUGis2QUdYY3R6hZCcp7K4w8/a5ev2/P////////////////////////////////////////////z28Ovg2trPycO+uLKtp6GckIuQhYCAenR0aWleXlhSTU1BQTw8NjYwKyslJR8fGhoPAwAAAAAAAAAAAAAAAAAUJTZHUl5pb3qAhYWLhYuLi4WLgICAdHRvb2NYXlJNR0E8PDArJR8lKzZHTVheXlhYTUc8NisfFA8DAAAAAAAAAAAAAAMDDxQfKzA8R1Jjb3qAi5ansr7J1ODr9v////////////////////////////////////////////////////////////////zw6+Da2s/Jw76ysqeclpCLhYB6dHRpY15eUkdNRzw2NjArJR8aGhoUDwMAAAAAAAAAAAAAAAAAAA8fMDxNWF5jaXR0enqAenp0dG9pY15YUk1BPDYwMCUfGhQPCQMAAwAJGh8rMDYwMCsfGg8DAAAAAAAAAAAAAAAAAAAAAAAAAAAPFB8rNkFSXml6gJCcp7i+z9rl8Pz////////////////////////////////////////////////////////////88Ovl4NrPycO+uLKyp6GckIuFgIWAdG9vaV5YTUdBPDw2NjAwKyslHxoUAwAAAAAAAAAAAAAAAA8aMEFSXm96gICFhYuLkIuQi4uFgIB0dG9jXlhSUkc8NjArJR8aFBoUGiswPEFBQUdBNjArHxQJAwAAAAAAAAAAAAAAAAAAAAAJFBorMDxNWGl0gIWQoa2+ydTa5fD8//////////////////////////////////////////////////////////z28Ovg2tTJw7i4sqehnJaQi4CAgHR0b2NjXlhSUk1NQTw2NjArKyUfHxoUGhQPDxQPDw8PCQkJCQ8JCQ8JAwkPDwkPCQ8PFA8UGhoUHx8fJR8lJSsrMDYwNjY8PEFBR0dNTVJSWFheY15jaWlvdG90dHp6gICAhYCFi4WLkIuQkJacnJyWnKGcoZyhoaenraenraetraenra2yrbKtsrKtsrKtsq2ysq2tsq2yuLK4sq2ysq2yrbKyra2ysq2nrbKtp6etp62noaehoZyWlpyWkJCWkJCWkIuLkIuQi5CLhYWFi4WLhYCFhYCAhYCFgIWAhYCAgICAgICAgICAgIB6gHqAenp6dHp0dHp6dHp0b3R0b290b3RvdG9vb3RvdG90b290b29vb290",O="data:audio/wav;base64,UklGRkIEAABXQVZFZm10IBAAAAABAAEAESsAABErAAABAAgAZGF0YR4EAACAgIWFgIWAdF5HNh8UDxQfNkdYb4CWobjJ2uDw8Pz////////89vbr5drUycO4raGckIuAem9pXlJNR0E2PEFNUl5eXlhYRzwwJRQJAAAAAAAAAAAAAAAAAAAAAAAAAAAAAxQfKzY8TV5pdHqFkJyhsr7D1Nrl8Pb////////////////////////////////////////////////28Ovr4NTPycO4uK2toZyWkIWAgHp6dGlpY15YWE1NQUE8PDArHx8aGhQaFA8UDw8PCQkPCQkJCQMDCQkJAwAAAAAAAAAAAAAAAAAPJTZNXm+AhZCcoa2tuL6+uL64uLitraennJyQhYCAenpvaV5eWE1HR01YY296eoB6dG9pXlJHPDAlHx8UDwkJAwMDCQMPFBQfJSs2QU1YY296gJCcobK+w9Tg5fD8/////////////////////////////////////////////////////////////Pbr5drUz8m+vrKnoZyQi4CAenRvY15YUk1HQTw8NjArKx8fGhoUDwkJAwADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFCU8TV5pdICAhYuQlpaclpaQkIuFgIB6dG9pY15YUk1HQTwwMCsrKzZBTV5eY2NeWE1BNisfGg8DAAAAAAAAAAAAAAAAAwkUGiUwPE1SXm96gIuWp7K+ydrl8Pb////////////////////////////////////////////////////////////89vDr5drUz8nDuLKtoZyWkJCFgIB0b2lpY1hSUk1HQTw2NjArKyUfHxoaFBQPFAkJCQkJAwMDAAADAAMAAAADAAMAAwkDCQ8JDxQPFBQaHxofJSslKzA2NjA2PDxBQUdHTU1SWF5YWF5jaWlvb3R6enSAgICAhYCFi5CQi5CQlpCWlpyWnJyhoaenp6etp62tsrKyrbKtsriyuLK4uLi+uLi4uLi+uL64vr64uL64vriysriyuLi4srKtsq2tsq2np62nra2nraehoaehp6GcoZycnJyWnJaclpCQlpCQi5CLhYWLhYWLhYWAhYCAgICAgICAgICAgICAenqAeoB6gHp0dHp0enRvdHRvb3Rvb3RvaW9vaW9pb2lpaWljaWNpY2ljaW9pb29paWljaWlpY2lpY2lvaW9paW9vaW9pb29vdHRvdG90dG90b290b3R0dHR6dHR6dHp6dHR6dHp0b3RvdHR0enp0enR6dHqAeoCAgHqAgICAgICAgICAgICFgIWFgICFhYCFi4uFi4WLkIuFi5CLhYuLi5CLi5CQi5CQi5CQi4uQi5CQi4uQi5CLkIuQi5CQi5CLi4uLi5CLkJCLkJCLi5CLkJCLkIuLkJCLkIuQi4uL",H="/space-invaders/assets/invader1-y-Esrj8m.png",F="/space-invaders/assets/invader2-3--_PfJaBe.png",z="/space-invaders/assets/invader3-4-xt5MqcZj.png";class w{constructor(e){i(this,"props");i(this,"invadersCount",55);i(this,"invader1",new Image);i(this,"invader2_3",new Image);i(this,"invader3_4",new Image);i(this,"animationSpeed",70);i(this,"livingInvaders",[]);i(this,"speed",5);i(this,"currentDirection");i(this,"moveSounds");i(this,"moveCount",0);i(this,"updateDirection",()=>{const{game:e}=this.props,s=this.livingInvaders.some(A=>A.props.x<=5),t=this.livingInvaders.some(A=>A.props.x+A.props.width+5>=e.props.gameWidth);s&&(this.currentDirection="right"),t&&(this.currentDirection="left")});i(this,"createInvaders",()=>{const{game:e}=this.props,s=32,t=24,A=20,o=30,n=30,h=[];for(let a=0;a<this.invadersCount;a++){const d=a%11*(s+A-5)+n,p=Math.floor(a/11)*(t+A)+o;if(a<11){const c=new u({x:d,y:p,width:s,height:t,speed:this.speed,image:this.invader1,animationSpeed:this.animationSpeed,game:e,points:30});h.push(c)}if(a<33&&a>=11){const c=new u({x:d,y:p,width:s,height:t,speed:this.speed,image:this.invader2_3,animationSpeed:this.animationSpeed,game:e,points:20});h.push(c)}if(a<55&&a>=33){const c=new u({x:d,y:p,width:s,height:t,speed:this.speed,image:this.invader3_4,animationSpeed:this.animationSpeed,game:e,points:10});h.push(c)}}this.livingInvaders=h});i(this,"updateInvaders",()=>{const{game:e}=this.props,s=this.livingInvaders.length;let t=!1;if(this.animationSpeed>0&&(s<44&&this.animationSpeed!=35&&this.speed!=6&&(this.speed=6,this.animationSpeed=35,t=!0),s<33&&this.animationSpeed!=20&&this.speed!=7&&(this.speed=7,this.animationSpeed=20,t=!0),s<22&&this.animationSpeed!=10&&this.speed!=8&&(this.speed=8,this.animationSpeed=10,t=!0),s<11&&this.animationSpeed!=8&&this.speed!=10&&(this.speed=10,this.animationSpeed=8,t=!0),s===1&&this.animationSpeed!=4&&this.speed!=11&&(this.speed=20,this.animationSpeed=4,t=!0),t&&(this.livingInvaders.forEach(A=>{A.props.speed=this.speed,A.props.animationSpeed=this.animationSpeed}),t=!1)),this.livingInvaders.length>0&&e.gameFrame%this.animationSpeed===0&&(this.updateDirection(),this.livingInvaders.forEach(A=>{A.updateInvader(this.currentDirection)}),this.moveCount>=3?this.moveCount=0:this.moveCount++,e.playSound&&this.moveSounds[this.moveCount.toString()].play()),this.livingInvaders.length>0&&e.gameFrame%this.animationSpeed===0){const A=Math.floor(Math.random()*this.livingInvaders.length);e.gameFrame%25===0&&e.projectiles.invader.length<3&&e.projectiles.invader.push(this.livingInvaders[A].fire())}this.livingInvaders.some(A=>A.props.y>550)&&(e.gameService.setGameOverMessage("Invaders have reached the ground! You lose!"),e.gameService.setGameOver(!0),e.inputHandler.destroy()),this.livingInvaders.length===0&&(e.gameService.setGameOverMessage("You win!"),e.gameService.setGameOver(!0),this.speed=6,this.animationSpeed=35,e.shields.shieldArray=[],e.shields.createShields(e.props.gameWidth),e.invaders.createInvaders())});i(this,"draw",()=>{this.livingInvaders.forEach(e=>e.draw())});i(this,"destroy",()=>{this.invadersCount=0,this.livingInvaders=[]});this.props=e,this.invader1.src=H,this.invader2_3.src=F,this.invader3_4.src=z,this.currentDirection="right",this.moveSounds={0:new Audio(j),1:new Audio(P),2:new Audio(B),3:new Audio(O)},this.createInvaders()}}class T{constructor(e){i(this,"props");i(this,"defender");i(this,"invader");i(this,"defenderProjectilesToRemove");i(this,"invaderProjectilesToRemove");i(this,"update",()=>{this.checkOutOfBounds(),this.defender.forEach(e=>e.update()),this.invader.forEach(e=>e.update())});i(this,"draw",()=>{this.defender.forEach(e=>e.draw()),this.invader.forEach(e=>e.draw())});i(this,"checkOutOfBounds",()=>{var s;const{gameHeight:e}=this.props.game.props;this.defenderProjectilesToRemove=[],this.invaderProjectilesToRemove=[],this.defender.forEach((t,A)=>{t.props.y<0&&this.defenderProjectilesToRemove.push({index:A})}),this.invader.forEach((t,A)=>{t.props.y>e&&this.invaderProjectilesToRemove.push({index:A})}),(this.invaderProjectilesToRemove.length>0||this.defenderProjectilesToRemove.length>0)&&((s=this.defenderProjectilesToRemove)==null||s.forEach(t=>this.defender.splice(t.index,1)),this.invaderProjectilesToRemove.forEach(t=>this.invader.splice(t.index,1)))});this.props=e,this.defender=[],this.invader=[],this.defenderProjectilesToRemove=[],this.invaderProjectilesToRemove=[]}}class v{constructor(e){i(this,"props");i(this,"allParticles",{});i(this,"getShape",()=>{const{x:e,y:s}=this.props,t=[{x:e+0,y:s+0},{x:e+0,y:s-40},{x:e+18.1,y:s-60},{x:e+51.5,y:s-60},{x:e+68.1,y:s-40},{x:e+68.1,y:s+0},{x:e+51.5,y:s+0},{x:e+51.5,y:s-8},{x:e+44.8,y:s-18},{x:e+24.8,y:s-18},{x:e+18.1,y:s-8},{x:e+18.1,y:s+0}];let A=1/0,o=-1/0;t.forEach(n=>{A=Math.min(A,n.y),o=Math.max(o,n.y)});for(let n=A;n<=o;n++){const h=[];for(let a=0;a<t.length;a++){const d=t[a],p=t[(a+1)%t.length];if(d.y<=n&&n<p.y||p.y<=n&&n<d.y){const c=(d.x*(p.y-n)+p.x*(n-d.y))/(p.y-d.y);h.push(c)}}h.sort((a,d)=>a-d);for(let a=0;a<h.length;a+=2){const d=Math.ceil(h[a]),p=Math.floor(h[a+1]);for(let c=d;c<=p;c++)this.allParticles[`${c}x${n}`]=!0}}});this.props=e,this.getShape()}}class K{constructor(e){i(this,"shieldArray",[]);i(this,"props");i(this,"allParticles",{});i(this,"explosionRadius",2);i(this,"explosionHeight",5);i(this,"explosionChance",.5);i(this,"offScreenCanvas");i(this,"offScreenContext");i(this,"createShields",e=>{const{game:s}=this.props,t=68,A=(e-4*t)/5;this.shieldArray.push(new v({x:A,y:500,game:s})),this.shieldArray.push(new v({x:A+t+A,y:500,game:s})),this.shieldArray.push(new v({x:A+2*t+2*A,y:500,game:s})),this.shieldArray.push(new v({x:A+3*t+3*A,y:500,game:s})),this.shieldArray.forEach(o=>{this.allParticles={...this.allParticles,...o.allParticles}}),this.allParticles});i(this,"destroy",()=>{this.shieldArray=[]});this.props=e,this.createShields(e.game.props.gameWidth),this.offScreenCanvas=document.createElement("canvas"),this.offScreenCanvas.width=600,this.offScreenCanvas.height=600,this.offScreenContext=this.offScreenCanvas.getContext("2d"),this.drawParticles()}draw(){const{context:e}=this.props.game.props;e.drawImage(this.offScreenCanvas,0,0)}drawParticles(){var e;(e=this.offScreenContext)==null||e.clearRect(0,0,this.offScreenCanvas.width,this.offScreenCanvas.height),Object.keys(this.allParticles).flatMap(s=>{if(this.allParticles[s]){const[t,A]=s.split("x");this.offScreenContext&&(this.offScreenContext.fillStyle="#00d300",this.offScreenContext.fillRect(parseInt(t),parseInt(A),1,1))}})}}class V{constructor(e){i(this,"props");i(this,"handleCollision",()=>{const{projectiles:e,defender:s}=this.props.game,{game:t}=this.props;e.invader.some(A=>A.props.y>t.props.gameHeight-500)&&e.invader.forEach(A=>{const{x:o,y:n,width:h,height:a}=A.props;o<s.x+s.width&&o+h>s.x&&n<s.y+17+(s.height-23)&&n+a>s.y+17&&s.lives>0&&(s.isCollided=!0,s.lives--,e.invader.splice(e.invader.indexOf(A),1),s.previousAnimationSpeed=s.props.game.invaders.animationSpeed,s.props.game.invaders.animationSpeed=0,s.props.game.playSound&&s.defenderDeath.play())})});this.props=e}}class X{constructor(e){i(this,"props");i(this,"handleCollision",()=>{const e=[],s=[],{game:t}=this.props,{invaders:A}=this.props.game;if(A.livingInvaders.forEach((o,n)=>{t.projectiles.defender.forEach((h,a)=>{h.props.x>o.props.x&&h.props.x<o.props.x+o.props.width&&h.props.y>o.props.y&&h.props.y<o.props.y+o.props.height&&(e.push({index:a}),s.push({index:n}),t.scoreService.score+=o.props.points)})}),e.length>0||s.length>0){for(let o=s.length-1;o>=0;o--){const n=A.livingInvaders[s[o].index].props.x,h=A.livingInvaders[s[o].index].props.y;t.explosions.add(n,h),t.playSound&&A.livingInvaders[s[o].index].invaderDeath.play(),A.livingInvaders.splice(s[o].index,1)}for(let o=e.length-1;o>=0;o--)t.projectiles.defender.splice(e[o].index,1)}});this.props=e}}class q{constructor(e){i(this,"props");this.props=e}handleCollision(){const{projectiles:e,invaders:s,shields:t}=this.props.game,A=[],o=[];e.defender.forEach((n,h)=>{const a=n.props.x,d=n.props.x+n.props.width,p=n.props.y,c=n.props.y+n.props.height;this.collideWithShield(a,d,p,c,!0)&&(A.push({index:h}),t.drawParticles())}),e.invader.forEach((n,h)=>{const a=n.props.x,d=n.props.x+n.props.width,p=n.props.y,c=n.props.y+n.props.height;this.collideWithShield(a,d,p,c,!0)&&(o.push({index:h}),t.drawParticles())}),s.livingInvaders.forEach(n=>{const h=n.props.x,a=n.props.x+n.props.width,d=n.props.y,p=n.props.y+n.props.height;this.collideWithShield(h,a,d,p,!1)&&t.drawParticles()}),A==null||A.forEach(n=>e.defender.splice(n.index,1)),o.forEach(n=>e.invader.splice(n.index,1))}collideWithShield(e,s,t,A,o){const{shields:n}=this.props.game;let h=!1;for(let a=e;a<=s;a++)for(let d=t;d<=A;d++){const p=`${a}x${d}`;n.allParticles[p]&&(n.allParticles[p]=!1,h=!0)}if(h&&o){const a=e-n.explosionRadius,d=s+n.explosionRadius,p=t-n.explosionHeight,c=A+n.explosionHeight;for(let m=a;m<=d;m++)for(let I=p;I<=c;I++){const f=`${m}x${I}`;n.allParticles[f]&&n.explosionChance>Math.random()&&(n.allParticles[f]=!1)}}return h}}class _{constructor(e){i(this,"props");i(this,"shields");i(this,"defender");i(this,"invaders");this.props=e,this.shields=new q(e),this.defender=new V(e),this.invaders=new X(e)}handleCollisions(){const{game:e}=this.props;e.shieldsOn&&this.shields.handleCollision(),e.godMode||this.defender.handleCollision(),this.invaders.handleCollision()}}class ${constructor(e){i(this,"props");i(this,"gameFrame",0);i(this,"inputHandler");i(this,"defender");i(this,"invaders");i(this,"shields");i(this,"projectiles");i(this,"explosions");i(this,"playSound",!1);i(this,"godMode");i(this,"shieldsOn");i(this,"gameService");i(this,"livesService");i(this,"scoreService");i(this,"collisionService");i(this,"update",()=>{this.projectiles.update(),this.invaders.updateInvaders(),this.defender.update(),this.collisionService.handleCollisions()});i(this,"draw",()=>{const{context:e}=this.props;this.gameFrame++,e.clearRect(0,0,this.props.gameWidth,this.props.gameHeight),this.projectiles.draw(),this.invaders.draw(),this.defender.draw(),this.explosions.draw(),this.shieldsOn&&this.shields.draw(),this.scoreService.drawHighscore(),this.livesService.drawLives()});i(this,"reset",()=>{this.invaders=new w({game:this})});i(this,"destroy",()=>{this.inputHandler.destroy(),this.invaders.destroy(),this.shields.destroy(),this.defender.destroy()});this.props=e,this.godMode=e.godMode,this.shieldsOn=e.shieldsOn,this.inputHandler=new k(this),this.shields=new K({game:this}),this.invaders=new w({game:this}),this.defender=new U({game:this}),this.projectiles=new T({game:this}),this.explosions=new L({game:this}),this.gameService=new S({context:e.context,gameHeight:e.gameHeight,gameWidth:e.gameWidth}),this.livesService=new b({defender:this.defender,context:e.context,gameWidth:e.gameWidth}),this.scoreService=new Y({context:e.context}),this.collisionService=new _({game:this}),this.shields.draw()}}let l;document.addEventListener("DOMContentLoaded",()=>{const r=document.querySelector("#game-canvas");if(r.addEventListener("click",ee),r){const e=r.getContext("2d"),s=600,t=600;r.width=s,r.height=t,e&&(l=new $({context:e,gameWidth:s,gameHeight:t,godMode:!1,shieldsOn:!0}),new R({game:l}),y())}});const ee=()=>{l!=null&&l.gameService.isGameOver&&(l.gameService.setGameOver(!1),l.reset(),y())},y=()=>{if(l==null||l.update(),l==null||l.draw(),l!=null&&l.gameService.isGameOver){l==null||l.gameService.drawGameOver();return}requestAnimationFrame(y)};
