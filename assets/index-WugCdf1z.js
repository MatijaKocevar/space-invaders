var W=Object.defineProperty;var L=(r,e,t)=>e in r?W(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var s=(r,e,t)=>(L(r,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(n){if(n.ep)return;n.ep=!0;const a=t(n);fetch(n.href,a)}})();class Y{constructor(e){s(this,"props");s(this,"apiUrl","https://matijakocevar.com/api/scores");s(this,"getHighscoreElement",async()=>{const e=document.createElement("div");e.classList.add("highscores");const t=document.createElement("h2");t.textContent="Highscores",e.appendChild(t);const i=await this.getHighscores();return i&&i.forEach(n=>{const a=document.createElement("div");a.classList.add("highscore-item"),a.innerHTML=`
                    <span>${n.playerName===""?"anonymous":n.playerName}</span>
                    <span>${n.scoreValue}</span>
                `,e.appendChild(a)}),e});s(this,"getHighscores",async()=>{try{return await(await fetch(`${this.apiUrl}`)).json()}catch(e){console.error(e)}});s(this,"onSaveHighscore",async(e,t)=>{const i={playerName:e,scoreValue:t};try{await fetch(this.apiUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)})}catch(n){console.error(n)}console.log("Save highscore button clicked: ",e,t)});this.props=e}}const G=()=>{const r=document.createElement("div");r.classList.add("change-log");const e=document.createElement("h2");return e.textContent="Change Log",r.innerHTML=`
        <span class='change-log-item'>- Scores get stored and can be looked up.</span>
		<span class='change-log-item'>- Added sounds for player death, invader death, shooting.</span>
		<span class='change-log-item'>- Added explosions for player.</span>
		<span class='change-log-item'>- Lives added.</span>
		<span class='change-log-item'>- Score board added.</span>
		<span class='change-log-item'>- Explosions added for Invaders.</span>
		<span class='change-log-item'>- Shield crumble more realistic.</span>
		<span class='change-log-item'>- Sheild block crumble.</span>
		<span class='change-log-item'>- Added sheild blocks.</span>
		<span class='change-log-item'>- Click to reset.</span>
		<span class='change-log-item'>- Added game over sign.</span>
		<span class='change-log-item'>- Invaders shoot back.</span>
		<span class='change-log-item'>- Invaders move faster the fever there are.</span>
		<span class='change-log-item'>- Temporary mobile controls.</span>
		<span class='change-log-item'>- Invader movement resembles original.</span>
		<span class='change-log-item'>- Animated invader movement. Invaders move down. Reset button.</span>
		<span class='change-log-item'>- Added sprites for player and invaders.</span>
		<span class='change-log-item'>- Figured out how to check for collisions with projectiles.</span>
		<span class='change-log-item'>- Invader movement.</span>
		<span class='change-log-item'>- Added Invaders.</span>
		<span class='change-log-item'>- Added projectiles.</span>
		<span class='change-log-item'>- The player can move left/right with 'A/D' and shoot with 'Space'.</span>
		<span class='change-log-item'>- Added player.</span>
		<span class='change-log-item'>- Figured out how to animate things.</span>
		<span class='change-log-item'>- Drawn a box with Canvas API.</span>
        `,r.prepend(e),r};class E{constructor(e){s(this,"props");s(this,"godModeButton");s(this,"shieldsOnButton");s(this,"highscoreButton");s(this,"changeLogButton");s(this,"isDevelopment",!1);s(this,"highscoreService");s(this,"init",()=>{if(this.godModeButton&&this.shieldsOnButton&&(this.godModeButton.addEventListener("click",this.onGodModeButtonClick),this.shieldsOnButton.addEventListener("click",this.onShieldsOnButtonClick),this.isDevelopment||(this.godModeButton.style.display="none",this.shieldsOnButton.style.display="none"),this.isDevelopment)){this.godModeButton.style.display="block",this.shieldsOnButton.style.display="block";const{game:e}=this.props;e.godMode&&this.godModeButton.classList.add("active"),e.shieldsOn&&this.shieldsOnButton.classList.add("active")}this.highscoreButton&&this.changeLogButton&&(this.highscoreButton.addEventListener("click",this.onHighscoreButtonClick),this.changeLogButton.addEventListener("click",this.onChangeLogButtonClick))});s(this,"onGodModeButtonClick",()=>{var t,i;const{game:e}=this.props;e.godMode=!e.godMode,e.godMode?(t=this.godModeButton)==null||t.classList.add("active"):(i=this.godModeButton)==null||i.classList.remove("active")});s(this,"onShieldsOnButtonClick",()=>{var t,i;const{game:e}=this.props;e.shieldsOn=!e.shieldsOn,e.shieldsOn?(t=this.shieldsOnButton)==null||t.classList.add("active"):(i=this.shieldsOnButton)==null||i.classList.remove("active")});s(this,"showPopup",e=>{const t=document.createElement("div");t.classList.add("popup-wrapper");const i=document.createElement("div");i.classList.add("popup"),i.appendChild(e);const n=document.createElement("button");n.innerText="X",n.style.marginTop="10px",n.classList.add("close-button"),i.prepend(n),t.appendChild(i),document.body.appendChild(t),document.body.classList.add("no-scroll"),n.addEventListener("click",function(){document.body.removeChild(t),document.body.classList.remove("no-scroll")}),t.addEventListener("click",function(a){a.target===t&&(document.body.removeChild(t),document.body.classList.remove("no-scroll"))}),i.addEventListener("click",function(a){a.stopPropagation()})});s(this,"onHighscoreButtonClick",async()=>{const e=await this.highscoreService.getHighscoreElement();this.showPopup(e)});s(this,"onChangeLogButtonClick",()=>{console.log("Change log button clicked"),this.showPopup(G())});s(this,"saveHighscore",()=>{const e=document.createElement("input");e.type="text",e.placeholder="Enter your name",e.classList.add("highscore-input");const t=document.createElement("button");t.textContent="Save",t.classList.add("save-button");const i=()=>{const a=e.value,{game:o}=this.props;if(a){const d=o.scoreService.score;this.highscoreService.onSaveHighscore(a,d),document.body.removeChild(document.querySelector(".popup-wrapper")),document.body.classList.remove("no-scroll")}else alert("Please enter a name.")};t.addEventListener("click",i),e.addEventListener("keypress",function(a){a.key==="Enter"&&i()});const n=document.createElement("div");n.appendChild(e),n.appendChild(t),this.showPopup(n)});s(this,"destroy",()=>{this.godModeButton&&this.shieldsOnButton&&(this.godModeButton.removeEventListener("click",this.onGodModeButtonClick),this.shieldsOnButton.removeEventListener("click",this.onShieldsOnButtonClick)),this.highscoreButton&&this.changeLogButton&&(this.highscoreButton.removeEventListener("click",this.onHighscoreButtonClick),this.changeLogButton.removeEventListener("click",this.onChangeLogButtonClick))});this.props=e,this.godModeButton=document.querySelector("#god-mode-button"),this.shieldsOnButton=document.querySelector("#shields-on-button"),this.highscoreButton=document.querySelector("#highscore-button"),this.changeLogButton=document.querySelector("#change-log-button"),this.highscoreService=new Y({game:this.props.game}),this.init()}}const g=(r,e)=>{if(e){const{alignment:t,fillStyle:i,font:n,text:a,x:o,y:d}=e;r.fillStyle=i,r.font=n,r.textAlign=t,r.fillText(a,o,d)}};class B{constructor(e){s(this,"props");s(this,"gameOverMessage","");s(this,"isGameOver",!1);s(this,"handleResize",()=>{var i,n;const{innerWidth:e}=window,{inputHandler:t}=this.props.game;e<600?(i=t.mobileControls)==null||i.classList.add("show-mobile-controls"):(n=t.mobileControls)==null||n.classList.remove("show-mobile-controls")});s(this,"drawGameOver",()=>{const{context:e,gameWidth:t,gameHeight:i}=this.props.game.props;e.fillStyle="rgba(0, 0, 0, 0.7)",e.fillRect(0,0,t,i),g(e,{alignment:"center",fillStyle:"white",font:"48px Arial",text:"GAME OVER",x:t/2,y:i/2.2}),g(e,{alignment:"center",fillStyle:this.gameOverMessage==="You win!"?"green":"red",font:"24px Arial",text:this.gameOverMessage??"",x:t/2,y:i/2.2+50}),g(e,{alignment:"center",fillStyle:"white",font:"18px Arial",text:this.gameOverMessage==="You win!"?"Click anywhere to continue":"Click anywhere to reset",x:t/2,y:i/2.2+100})});s(this,"setGameOver",e=>{this.isGameOver=e});s(this,"setGameOverMessage",e=>{this.gameOverMessage=e});s(this,"drawInstructions",()=>{const{context:e,gameWidth:t}=this.props.game.props;g(e,{alignment:"center",fillStyle:"white",font:"12px Arial",text:"A/D to move, Space to shoot",x:t/2,y:20})});this.props=e,window.addEventListener("resize",this.handleResize)}}class k{constructor(e){s(this,"props");s(this,"score",0);s(this,"drawHighscore",()=>{const{context:e}=this.props;g(e,{alignment:"center",fillStyle:"white",font:"bold 15px Arial",text:"SCORE ",x:40,y:20}),g(e,{alignment:"center",fillStyle:"white",font:"bold 15px Arial",text:this.score.toString(),x:80,y:20})});this.props=e}}class D{constructor(e){s(this,"props");s(this,"drawLives",()=>{const{context:e,gameWidth:t,defender:i}=this.props,n=i.lives.toString();g(e,{alignment:"center",fillStyle:"white",font:"bold 15px Arial",text:n,x:t-80,y:20});for(let a=0;a<i.lives-1;a++){const o=t-65+a*30;e.drawImage(i.image,o,3,20,20)}});this.props=e}}const J="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAACXBIWXMAAAsTAAALEwEAmpwYAAAHXGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDggNzkuMTY0MDM2LCAyMDE5LzA4LzEzLTAxOjA2OjU3ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjEuMCAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDIzLTA1LTE4VDA0OjA0OjAzKzAyOjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDIzLTA1LTIxVDIwOjA1OjMwKzAyOjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyMy0wNS0yMVQyMDowNTozMCswMjowMCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpiMmU4NDYwMC1jNjI5LTM3NDItYTlmZS1hOWM2YjM4OGViYmIiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDo0ZWUyNzlmNC1jNzliLTk1NDYtYWEyNi01NWMyYjI2ZmViMDQiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpjN2EwZGVkNy03YjdhLTM0NDItYWQ0NS1jYzFkZWI0NmVkNDEiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmM3YTBkZWQ3LTdiN2EtMzQ0Mi1hZDQ1LWNjMWRlYjQ2ZWQ0MSIgc3RFdnQ6d2hlbj0iMjAyMy0wNS0xOFQwNDowNDowMyswMjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDIxLjAgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDphOTA5YzlkMi0wZTMwLTdiNDItOWI5OC1hMjIzODUyYTlhMzYiIHN0RXZ0OndoZW49IjIwMjMtMDUtMThUMDQ6MDQ6MDMrMDI6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyMS4wIChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6YjJlODQ2MDAtYzYyOS0zNzQyLWE5ZmUtYTljNmIzODhlYmJiIiBzdEV2dDp3aGVuPSIyMDIzLTA1LTIxVDIwOjA1OjMwKzAyOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjEuMCAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDxwaG90b3Nob3A6RG9jdW1lbnRBbmNlc3RvcnM+IDxyZGY6QmFnPiA8cmRmOmxpPmFkb2JlOmRvY2lkOnBob3Rvc2hvcDo0ZWUyNzlmNC1jNzliLTk1NDYtYWEyNi01NWMyYjI2ZmViMDQ8L3JkZjpsaT4gPC9yZGY6QmFnPiA8L3Bob3Rvc2hvcDpEb2N1bWVudEFuY2VzdG9ycz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7GEJs+AAABBUlEQVRoge2aMQ6CQBBF/5otLL0AVFpqxZU8lVciege4gKXd2ghZVwIqs/AzmVeREHb2MTObIcGFEKCBzdobkMJE2DARNtSIuP31mG3xtm7Ss90VVZklVvaMFFWJXJuPUVNaXnrBgXKKCW3ddNeiZSaakVQi3ujApmOp2YhnZOwtx/fausHjfAcAHG6n2XHV9IgaEfHS+oXtZQdgvBy/RU1GVhXpml0Cy4gEXY9IoCYjb6fWxHiRg/CK++/z/ZjzcfwuMalKxEnl1ZSWGhG/Ql9I0k/QHliuLyRJJ2k1pWUibJgIGybChomwYSJsmAgbJsKGB2Z9/NPg7BcOMkyEDRNhQ43IE/r/PxbElTYPAAAAAElFTkSuQmCC",N="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAsCAYAAACHUEHxAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ4IDc5LjE2NDAzNiwgMjAxOS8wOC8xMy0wMTowNjo1NyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDIxLjAgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjY0RDEwMzNCMTM2QzExRUU4NkY3OTZENzlBMzU2QzM0IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjY0RDEwMzNDMTM2QzExRUU4NkY3OTZENzlBMzU2QzM0Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NjREMTAzMzkxMzZDMTFFRTg2Rjc5NkQ3OUEzNTZDMzQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NjREMTAzM0ExMzZDMTFFRTg2Rjc5NkQ3OUEzNTZDMzQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6BnJ69AAACk0lEQVR42uxcPU7GMAxtUAZGLgAbKxISV+JUXAkJiZUNLsDIFr6ir1Lp1zZOYqd28t6ChGjjus/PP0lxIYRBEtcvN3sLuJ/n7wFoD77GIrdPdxe/+3r9hPdBLMCKCmuxDcRqUIU12HYFigBQrM7S6iltOaupH8RC6hKxEakQsJsKMVoAsSTg1mTUOuE0267BNihWZrDAtuOJFWJOoHZGVraHsI2laEuH2nVo6KBixDgR6zA7pUibajvGDYBIesW4AbCbCgvrlQFHa3hruch1LHUhUqHx8UBuLbc1AuKyzUtHB5Bfv1hWa18jOjgjw8pMrPfdBtFUOEYcc9fhjPiVbKclRUrJWqLEGhdKIBcXSYtx//bw9/Pj8R2JOjNrqSjeKVFbM7JLCRXrxjaCpKk69WhiBYISubPyibfImiJeupaTrgG9JgfHHl66RdbSIROCaFrDZdy7Sq3KQqyYI6l7fi3WGtyBZ6XbTCJW5kOtRUcYANGAHlUvpSvnLhtSiLV5YO/8ACGRXIDCcoPr730sp8/PQ8Vuupce5hFRc3TQKOZqVLNJIQuEj5Fi2lagnEEC5BuL+XvSXG+RUqH2PasNBweF8yIzJUFp50silpHB3fKlhaUKc0Z4D3uBJZ0vjs1UVJ6eToAkEStj+h1LS6zXamoQCnwl6ttaSpusWKmDzZJBqNYhKlV5pO0vuH+9yTu+Vu4HU2BIqrq31q1IpQ4t/9lFg/JyEK7J4n1yTO53ia0fw578k7PHS/HRGKR+bYHlRUaGn0slKtqjpLbaFYt0Vl8t3uu/YDkfU3IlPvLWCmeKrTn1YskQuDdfdZsKt2oIbDvxdb4xX+JLaEAEIBYAYgF24HNaTcuQ+DC21+Hy3nP/CjAAkP91RszS5jcAAAAASUVORK5CYII=",U="/space-invaders/assets/explosion-4FMMjE7o.wav",O="/space-invaders/assets/shoot-SCjv8snc.wav";class b{constructor(e){s(this,"props");s(this,"shoot");this.props=e,this.shoot=new Audio(O)}update(){this.props.direction==="down"&&(this.props.y+=this.props.speed),this.props.direction==="up"&&(this.props.y-=this.props.speed)}draw(){const{context:e}=this.props.game.props;e.fillStyle=this.props.color,e.fillRect(this.props.x,this.props.y,this.props.width,this.props.height)}}class Q{constructor(e){s(this,"props");s(this,"checkGameOver",()=>{const{defender:e}=this.props.game,{game:t}=this.props;return e.lives===0?(t.gameService.gameOverMessage="An invader shot you! You Lose!",t.gameService.setGameOver(!0),!0):!1});s(this,"animateFrame",()=>{const{game:e}=this.props,{defender:t}=this.props.game;e.gameFrame%10===0&&(t.frame=t.frame>0?0:1)});s(this,"handleHorizontalMovement",()=>{const{inputHandler:e}=this.props.game,{defender:t}=this.props.game;t.isCollided===!1&&(e.keys.includes("KeyD")?t.speed=t.maxSpeed:e.keys.includes("KeyA")?t.speed=-t.maxSpeed:t.speed=0,t.x+=t.speed)});s(this,"handleShooting",()=>{const{inputHandler:e,defender:t}=this.props.game,{game:i}=this.props;e.keys.includes("Space")&&i.projectiles.defender.length===0&&t.isCollided===!1&&(t.reload||(i.projectiles.defender.push(this.fire()),t.reload=!0,t.timeout=setTimeout(()=>{t.reload=!1},200)))});s(this,"preventGoingOffScreen",()=>{const{defender:e}=this.props.game,{game:t}=this.props;e.x<0?e.x=0:e.x>t.props.gameWidth-e.width&&(e.x=t.props.gameWidth-e.width)});s(this,"fire",()=>{const{defender:e}=this.props.game,{game:t}=this.props,i=new b({height:10,width:2,speed:10,x:e.x+e.width/2-2,y:e.y,color:"#00d300",direction:"up",game:t});return t.playSound&&i.shoot.play(),i});this.props=e}}class H{constructor(e){s(this,"props");s(this,"width");s(this,"height");s(this,"x");s(this,"y");s(this,"speed");s(this,"maxSpeed");s(this,"timeout",setTimeout(()=>{},0));s(this,"reload",!1);s(this,"image");s(this,"explosionImage");s(this,"lives",3);s(this,"previousAnimationSpeed",0);s(this,"isCollided",!1);s(this,"collisionPause",0);s(this,"frame",0);s(this,"spriteWidth");s(this,"spriteHeight");s(this,"defenderDeath");s(this,"defenderService");s(this,"update",()=>{this.defenderService.checkGameOver()||(this.defenderService.animateFrame(),this.defenderService.handleHorizontalMovement(),this.defenderService.handleShooting(),this.defenderService.preventGoingOffScreen())});s(this,"destroy",()=>{clearTimeout(this.timeout)});this.props=e,this.width=42,this.height=40,this.x=50,this.y=e.game.props.gameHeight-(this.height+10),this.speed=0,this.maxSpeed=5,this.image=new Image,this.image.src=J,this.explosionImage=new Image,this.explosionImage.src=N,this.spriteWidth=75,this.spriteHeight=44,this.defenderDeath=new Audio(U),this.defenderService=new Q(e)}draw(){const{context:e}=this.props.game.props;this.collisionPause>80&&(this.isCollided=!1,this.x=50,this.props.game.invaders.animationSpeed=this.previousAnimationSpeed,this.collisionPause=0),this.isCollided?(this.collisionPause++,e.drawImage(this.explosionImage,this.frame*this.spriteWidth,0,this.spriteWidth,this.spriteHeight,this.x,this.y-3,this.width+2,this.height)):e.drawImage(this.image,this.x,this.y,this.width,this.height)}}const T="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEMAAAAqCAMAAADf7xbTAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ4IDc5LjE2NDAzNiwgMjAxOS8wOC8xMy0wMTowNjo1NyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDIxLjAgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjFFQjkzOTJGMTM0QTExRUU5Njc0OUY2OTA2M0UxMzZDIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjFFQjkzOTMwMTM0QTExRUU5Njc0OUY2OTA2M0UxMzZDIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MUVCOTM5MkQxMzRBMTFFRTk2NzQ5RjY5MDYzRTEzNkMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MUVCOTM5MkUxMzRBMTFFRTk2NzQ5RjY5MDYzRTEzNkMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6zWk7IAAACGVBMVEX///8RERHq6up2dnZiYmITExNKSkqAgIDi4uIzMzMoKChbW1v29vYWFhbNzc3R0dGFhYUyMjJTU1NERETExMQ8PDxmZmaTk5ONjY3x8fE6OjrFxcWqqqre3t719fXu7u6enp74+Pirq6uXl5fc3Nz7+/vk5OSurq7W1tYXFxdAQEDLy8vp6ekxMTHU1NS9vb0UFBRkZGQ1NTVYWFi3t7d0dHR/f3/v7+8/Pz8QEBAZGRnKysofHx9aWlqlpaX09PTm5uZXV1c7OztZWVkcHByQkJBGRkYqKir5+fnMzMwLCwsJCQn8/PySkpLDw8PAwMDy8vIPDw9WVlYNDQ0vLy94eHhCQkJ6enr39/chISEiIiLBwcFra2u+vr4nJydsbGwaGho9PT0KCgo+Pj6ioqIjIyMmJiZvb29HR0ejo6O4uLi/v782NjapqamhoaHY2NgeHh5wcHCEhIRFRUU3Nzd1dXUVFRUbGxuRkZEICAh3d3eoqKh8fHxfX19jY2OGhoaCgoLIyMhDQ0Pj4+Pr6+sODg6UlJTGxsa7u7vw8PC0tLSKiorz8/NOTk5nZ2cSEhLS0tLPz8/V1dXo6OiZmZnOzs4YGBiYmJjJyckrKystLS2xsbFpaWlNTU15eXlBQUFgYGA4ODivr68gICCIiIhVVVWOjo4MDAyysrK6urq8vLzn5+cwMDCdnZ0sLCw5OTl7e3uPj4////9ic1e1AAAAs3RSTlP/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////AA8pv+gAAAKfSURBVHjaxJZnVxpBFIYXFRAMIkI0aowxVWIFa1RQQ0yBNIEUCNh716jpvffee+9tfmHmHQKEXVZ3z4nJ8+nOLQ8LZ3YGjvB5btYC31levpOle8sEA4QTZNaqObCZ31zP0lkZ8+aoNwCtXIfzEca+7GeOE6vAK7kOcx3GxtqYYysrbuM57r7WUZROmvHMIPzGc9QmY71jZzyH5+pyMJAJfrTSzPBxhF9HkP7ZJcXxm5QFyBbUICxiHdbYBgkOm8ChiW1oDzkOMYdlNfiwCEz3SnBoWOu5Sxizp/+xPyysr2SNBEcTW3IbBHuM72i6mE/Rd9DQcRphvkG2497LbIpBiV9vGGG2QrZjFkQdjmRw0rIQ6ESmfaw6/Zn1dgkcPemgckgPOkQcT26ieqGP9baLvLfGAvaYKhFH1RZU64pnfff/n8ORFME2I9kxHp1K6uduJES41Uq8zcuARsThHkH1jZ/URKcSDnONXISijcSpUAKniMPDqopOYoxOcRU8h1Tm3XFtKbCJjD5D8c5bviOQGKHNTEj3SvBOxDGE4pVJQvzRqUQ3/36xM3WziGMvinvS5rij/qrjvQK0HKQ5VwuLXXM6XKxPN7oEXCYkMJZLsV+nJe9jhLnfCfmIYt5kSO8SOMqCOZTBFxowTsjuTfjMUpxj1kL2cLsI0aJonUBnTqZZ4DCzM7i6PLyO6whRyZbb1/8TxxGBwyjD4V4MTKngPg7zh90s/oT06L64jtqnKZRjqSbKIG0J3ftBweZoCN/7DnSaKjIwpgo5ps7nURqPFlO8urCjVODIiv3vcOA2xoIhx7oSFBsiN4uYozrWoWZfvlCe44wMx8QKMCBwPEBaXy7JoVWBKYHjFNL9vrgOf18apaqHyMOoxliARr8EGACDXsBbedFuJQAAAABJRU5ErkJggg==";class Z{constructor(e){s(this,"props");s(this,"image",new Image);s(this,"width");s(this,"height");s(this,"lingerCount",0);s(this,"draw",()=>{const{context:e}=this.props.game.props;this.lingerCount++,e.drawImage(this.image,this.props.x-2,this.props.y-2,this.width,this.height)});this.props=e,this.width=35,this.height=25,this.image.src=T}}class P{constructor(e){s(this,"props");s(this,"explosions",[]);s(this,"add",(e,t)=>{const i=new Z({x:e,y:t,game:this.props.game});this.explosions.push(i)});s(this,"draw",()=>{const e=[];this.explosions.forEach(t=>{t.draw(),t.lingerCount>=20&&e.push(this.explosions.indexOf(t))}),e.forEach(t=>{this.explosions.splice(t,1)})});this.props=e}}class j{constructor(e){s(this,"keys");s(this,"game");s(this,"mobileControls",document.querySelector(".mobile-controls"));s(this,"keydownHandler",e=>{(e.code==="KeyA"||e.code==="KeyD"||e.code==="Space")&&this.keys.indexOf(e.code)===-1&&this.keys.push(e.code)});s(this,"keyupHandler",e=>{(e.code==="KeyA"||e.code==="KeyD"||e.code==="Space")&&this.keys.splice(this.keys.indexOf(e.code),1)});s(this,"createMobileControls",()=>{var n,a,o;(n=this.mobileControls)!=null&&n.children.length&&(this.mobileControls.innerHTML="");const e=document.createElement("button");e.id="left-button",e.innerHTML="&lt;",e.addEventListener("touchstart",this.onLeftButtonTouchStart,{passive:!0}),e.addEventListener("touchend",this.onLeftButtonTouchEnd,{passive:!0}),e.addEventListener("mousedown",this.onLeftButtonTouchStart),e.addEventListener("mouseup",this.onLeftButtonTouchEnd);const t=document.createElement("button");t.id="fire-button",t.innerHTML="FIRE",t.addEventListener("touchstart",this.onFireButtonTouchStart,{passive:!0}),t.addEventListener("touchend",this.onFireButtonTouchEnd,{passive:!0}),t.addEventListener("mousedown",this.onFireButtonTouchStart),t.addEventListener("mouseup",this.onFireButtonTouchEnd);const i=document.createElement("button");i.id="right-button",i.innerHTML="&gt;",i.addEventListener("touchstart",this.onRightButtonTouchStart,{passive:!0}),i.addEventListener("touchend",this.onRightButtonTouchEnd,{passive:!0}),i.addEventListener("mousedown",this.onRightButtonTouchStart),i.addEventListener("mouseup",this.onRightButtonTouchEnd),(a=this.mobileControls)==null||a.append(e,t,i),window.innerWidth<600&&((o=this.mobileControls)==null||o.classList.add("show-mobile-controls"))});s(this,"onLeftButtonTouchStart",()=>{this.keys.push("KeyA")});s(this,"onRightButtonTouchStart",()=>{this.keys.push("KeyD")});s(this,"onFireButtonTouchStart",()=>{this.keys.push("Space")});s(this,"onLeftButtonTouchEnd",()=>{this.keys.splice(this.keys.indexOf("KeyA"),1)});s(this,"onRightButtonTouchEnd",()=>{this.keys.splice(this.keys.indexOf("KeyD"),1)});s(this,"onFireButtonTouchEnd",()=>{this.keys.splice(this.keys.indexOf("Space"),1)});s(this,"destroy",()=>{window.removeEventListener("keydown",this.keydownHandler),window.removeEventListener("keyup",this.keyupHandler)});this.keys=[],this.game=e,addEventListener("keydown",this.keydownHandler),addEventListener("keyup",this.keyupHandler),this.createMobileControls()}}const F="data:audio/wav;base64,UklGRlUNAABXQVZFZm10IBAAAAABAAEAESsAABErAAABAAgAZGF0YTENAACAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQpJFvX1tkan6GbG17oJ52ZZC9bk+aynUQYNC7QWTAr10Aav2JEYzyZwGG/4YEbuZ2AZX/WQag/24APLH/URvPqis9yLMXaPVwC2bS2SdJ7XIdOa3/WwCR/4oKPqv8VACs9C4vz75KAI3/kxBBv9ceVOCjTgCA/3wAlf9mAIr5qT8Apv8+GMPlIU7go0YAkf9kAKH/XACj/18Ahva/TQB9/4IAWMbiXwB6/54rNdWyFWPWyDEnxtZLAIP/hgZo27MSaftoBGrkzC0zufdMALL0JzTH3FUAaf+2I2P+YAB2z/NUAIn/fACM/XkrE6L/kw88tP8+GsTeWwCH/2AAsv9MBrP/UACm/2wAbv9cAHrk1zkYtfxLAHb/hgGF1rxBAKP/XwCP/34iMMH/QRbQyTIf0ccqRr77OQu+3VcAjP+BG1jRyjYcuvteAJD/UgS+/zwTytwqN9S6I07dqRtf1b1LAJL/cQCp/1MAdvGkGWvK1E8Ahf+ZKj7YpAeU5Zo2ALn/QQnF6DYivfRQAHHu0iha1p8zAsXaOx/A/0YIqP96AHXrXAeC6rwQfOV5Lg+y/2gAjv9XAJz+gxlk1LdABqT/awhhs/9jAHnlmyxX1rU8I6//dw8yp/9iAKvxcQ5h7n8Tn/xbAKL7fhVm1Kw+D67/WgCj5akxDr3nTgCT/38feN2UJFbjfxSD18MmRs2yQgCn/2cFi9evSQCw/3oPaNWkRACz/0kWxfVBAK//WACn8nQnKcbyQwyr/2kAleCOHVjDxj8AwPFCCrT/WgCx+j8Yv+xVAIf3Yh2G3sUyNMjROhPE5jsUr/9nAJ7vUACU0c5HAMDqOBy9/1UAle2HMyau/1wAkdOWPwe9/z0RuP93FTS28D8AvvVWBH7lqT43w/Y3DcDzQQC1+3YqJrv/RAC6/4MtHbb/UwCU07tRALX/VAme8FsLtfljE3XlayF5184mV9WZLy/TsSB34YAYkexbH3nQ1z0Atf9VAqXkYxxc1cInbNOkQgC9/20qNcrjPhSz/2MUYcDbOwG+/1QXU7r/PgC/7EIAwfI7HNDUOB61/0EIxt0uH8zLKj/VsDUxwvs8Bqf2XBOFx9M8AKr8fiBo0ZUpUczAKkranzFJwfpOAKrrQw+x/FcffsPzRAC05kAInvKCKG2/30AAquSXLybI1T8AmPOnJ3zeaTYrvv85Dq/rjhxbwqsuF8nwRQeP75Eine5PKVa+/zsAv+pwKCvF+DkDwv9GEb/oUw1r0b42KdHZNBnN7zYUwPtxHSu+/TQAkeulIoXgdCFe1KUhY+ZtF7bpbiBq2pQegOhWD7/wYCpJyfwtBtDuNQCd94IpaL7zKgCw3owsBsn/OQCp2K8xENnLIEjVuS0z4rAkWcn6RQCx4zUVmPWVJ17I+jsAhtiSG5DgeS0u1vAfQOGdKFvNzisQ1P5LAKDsTiV219cjRNHELgLR8TwBrvlQJovV3SsAtvKGFGTNoTEF0f8sIt/bLBW7/0AZiOGoD4bMiyIk0tsyBtjtIjrR3jUAvOaMJEHjjilW2tMdUtqlJTPO7yID3NYpIcv/NgSs6GIZkdSJHF3RrSoX4M8bXtuzMgbG/2Eald5cImfU1Ccb0/xFAKDhWR6E26MlS9rDJyTkxCBU4pgZgtGXJzDkpyhF0fsmFtbgIwKq8WgaocyyKQDP+loXduBwIZDeiTM1zv43BLfWhC4F1f8qHqznpyAt1coRVuNxMVXV/B0g5b0oIL/+Uw2l3EkjbN7QIj/b1SMOw+uJKwDJ/y0in+WhHlPcoik2zfgmE7Hgqh8Z4sYfR9fsJgDO7TQf2NkiFtr5ShCc3j4c2PFEEY7cWRO/41EqVM//IwC0z50hM9+0Jiri5hc/3rwoCc3/Qi1r0fwaANXjVBKM1YQzGND/QSfV3igac9fyGxXg4TALm+V7L3fcqBd51IEuGcz/TR2qznwuGMr/PyXQ2y4Rpt9bI7PkRimH19YWFObAHFPWvx4g488eR+WpKD3H+EYTmc17Kk7dwRZo0akqBtf2OinL2i4RwN1JKYfjmi1LyvI7DK3JLSyV6KsoSNDmGwrXyyYt2eIeH9nSJBrK34YtIuPVIEHdwiQvxudzGF3FqiA25LMsOMbugCwn1eMXLNrULhSj3Gg9ZdT1KxpqyeweD9XaNy561ssYSdejJULgripFxutcKlTI4hsX1NFBJpfZYi280l49RtLyQS9Jy/cbJpHO2x4Qm+CYLHTLsSUcxuNSL5nHeyxn24IqqcV4NCm871Axtc5ELaPEpiMl47QpXN2qKWXTrC4ox981PIrathtqyYIxMbzqcy6Jy1gxrsR3NUHS0h8gwtZIM8bHMiun0E8yvM1VMYjBoCsh2dxPN2fOxyQx270pTNXGJCa32GM+WcrqLyinxl4ttsJaPEXW2ixN0rwhLYvVzSQy2b8qK7nXWkVkzNwiPdC6KSWozoA5cc2sKUTcozJTztcwKaLCfD5GvuBBO824KTTQxz0xkcpwPZPKji9pzJMtZM+cL1nOsCFqzXRAVcXaPjt8yLMhXM+JMW7Cqig726gvXc66JzSV1bglQtG/LSrKuDJJheC6I3C/li0qyc5GPqDCdjxpz6wuQ83DLEjOtSwxtchrQnTGriszpNh5M6+zWT1f0p41ZM26JzOpzndBWLfTOzzIsDs9dMu+KUvUsS47xcRBRKTDaTmotVdCbcm/KDPAwnhAUM3LMjbDtk9JY9K+MlPLwC04rrxWQcSwLk/QqTFEwcZkRlTKxyxBfc+1M1HIvi88rLhUQ7y5VEGQw2tJb8LOPD2VuG88p7FoRVDOwDpPx603U4zNrx0vtbhOU2bDzDZJa8a7L06QzYI8Xr3BQkFyxJg0h7aJOkTPxE5FmrZdSZ27aE1nts9FSMCqQD+msVpVabzMQ0vGq0BMaMbLQUl5vrErSJ3FpzJByqRCWJHSij9fuL5KRG+/uCpHyaw5UpXGri9Au7RHV8GfOFLDrT5SuLNLS5y4aEWUtWlKdMCyMkiot2FMi7KWM1zEmTdQw7dBV8OTQlmnv2hMbL+iNVK9skNPdcK9MEaWuXRFoaZrTlnEuTlWwKQ+Uqm2YEydqnlBcr11TmyrxXQ8c7R9R2G9tTxZw6I/TJW4eEaiqFBUm7hpUG6vuERTlrGYMUe7r2BPYbi1R1Sqq1ZUg8CnNE2nsm9LW7O5V1GNs3JTba28VVJwuqo3W8CjPE6dtW1UirmVPVOrtnVKWMGuQ1Z4v7Q0VaiuWlK0nFVVb8GkQWOtsGtHYLuiQWK4o0hauaVIU5yve0l0vYVQc7yfO1aFxZ0/bbadOlKdsnlLXJXCg0RXn7ZqTXmzh0prtKBBW6mpaE5js61JX7mgSlmAtqM5Xb6fRlavn1JikrqZP1O0plZYkKt5Umq4pEpdnatoVIG1lEBcisCmN1e4mEZdn7BpWJugclB8tXpSf7OWQlitq1del6uFRWq5g01njcWJSX+nhEZWo7FpWYarhUpquo9NaaymT1iOqnpQaZK+h0dfrpxJYn66n0FajbKLS2WtnEpinKh7S3Owj0VluZFLareVS2GgpGBgp5plUoymZGR3n7NcXoKwmz9WnaRoXIWvj0hmqpZVY6OlZFtwlbl1UIGib1eMpG9cjqOATnGwjUxiraJqW3KzlEppo6NkWZGZY2SIsX9Wcoq4iUVeo6BdY3qxnEhelqRtYIirg1Jpk69pW5eWaGBrkrh2WJCYbF93sZVIZnywpVRgiKWCUGyrl1JojaqFU2eWrIJRZKmdYmNxqZ9Va5aieFdwq5dNZ6mQXWaLsnxec4W1hk1mopldX3KmllBpkaNyWpKTZGWDq4pPa4CymE5fh6OCVnOnj1hsmp51WWyqmVlmmJRwY3Gtklptj6p5WWyPq4JSbKqLUGuCrZ5Van+pmVBllJptZIigeV51o5NdaZGgbmR3oJ1gZ3Wok1Fpi6WIVmeemmVpk5xzYnScmVtroZFdbXSTrmpqdoqoa1+JlXRgcqOUXWuFo4tTaaCTYG6ZkmlpdY2thVRxo4RWbX6llWFsf6aSUWySimdrmZBobYSkgmF0mJVmaoGkiVNpjaB9YG6Mp3lldJuRXmyHn4RYbIqlgl52oIlbbIqcgmFyoI9bcJaNZm2WkWhslo5tbH+jiFtuhqGEYHCUlW9lgpl9Y3GJqIhabI+Yc2p9mYpdepp/Y32ed2d0iqd6YXOVkWlsiJJxbXaFrIVdbYuWcWyGk4BhcJeTaXN+jplra3qUk2Vsgpl/ZXiUi2pxf6CLYW2ImHtpfpqKXm+LlXtpd5iPam6HknppdpmPbHF0kZFpb3yZh11yloZmdXyUlm1we5eKYHB8mI5pcH2ahWZ0fpqRbG9zjZZudHqFnnNvgA==";class I{constructor(e){s(this,"props");s(this,"spriteWidth");s(this,"spriteHeight");s(this,"frame",0);s(this,"currentDirection","right");s(this,"invaderDeath");s(this,"moveLeft",()=>this.props.x-=this.props.speed);s(this,"moveRight",()=>this.props.x+=this.props.speed);s(this,"moveDown",()=>this.props.y+=this.props.height);s(this,"updateInvader",e=>{const{gameFrame:t}=this.props.game;if(this.currentDirection!=e){this.moveDown(),this.currentDirection=e;return}e==="left"&&this.moveLeft(),e==="right"&&this.moveRight(),t%this.props.animationSpeed===0&&(this.frame>0?this.frame=0:this.frame++)});s(this,"fire",()=>new b({height:10,width:2,speed:10,x:this.props.x+this.props.width/2-2,y:this.props.y,color:"white",direction:"down",game:this.props.game}));s(this,"draw",()=>{const{context:e}=this.props.game.props;this.props.image&&e.drawImage(this.props.image,this.frame*this.spriteWidth,0,this.spriteWidth,this.spriteHeight,this.props.x,this.props.y,this.props.width,this.props.height)});this.props=e,this.spriteWidth=57,this.spriteHeight=38,this.invaderDeath=new Audio(F)}}const z="data:audio/wav;base64,UklGRm4EAABXQVZFZm10IBAAAAABAAEAESsAABErAAABAAgAZGF0YUoEAACFhYCFgICFhYuFgIWFhYWFgIWFgIWAhYWFemNNNh8UCQ8aKzxYY4CLobjJ2uXw9v///////////Pzw6+Daz8m+uKecloWAenRpY1JSR0c8PDxHUl5YXmNYUkE2Kx8PAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAMPGiU2PE1SY296gIuWp62+ydTa5ev2//////////////////////////////////////////////////br5eDg1MnDuKGFb1I8KyUfJSs2QVJeaXR6hYuQlqGhoaehnJaWkIuAgHp0aWNSTUE2KyUaDwMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPGis8TV5vgIucrbLD1ODw/P///////////////////////////////////////////////////////////////OvPspaAb2NjaW96gIuWp7K+ycnU2uDg5eDg4NTUz8m+uK2hlouAemleWE1BNisaGg8AAAAAAAAAAAMJCQMDAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAw8aKzxHUmN0gIuWobK+ydTa5fb8/////////////////////////////////////////////////Pbw6+Da1MOti3pjTUdBQUdSXml0gIuWoa24vsPDycPJw8O+sq2noZaLgIB0aWNSRzwwJRoUCQAAAAAAAAAAAAAAAwMDAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPHys8R15jdICLnK24w8/g6/b///////////////////////////////////////////////////////////z88ODPrZCAaVhSWFJeb3qAkJytsr7Pz9Ta2uDg1M/Jvriyp5yWi4CAb2NYTUc2KyUaDwMAAAAAAAAAAAADCQkPCQMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPGis8R1hjdICLnKeyvs/a5fD8///////////////////////////////////////////////////////89vDl4NrUz8O+uLKtp5yWkIuFgICAenRvaWNeWFJNTU1HQUE8PDYwKyslJSslHyUfGh8aHxoaGhoaHx8fGh8fJSUfJSUfJSslKysrMCswNjY8Njw8QUdBR0dNTVJNUlJYWF5jaWNpaWlvb3R0dHp6dHqAgICFhYCFhYuFi5CQi5CWlpaclpycnJyhnKGnp6ehp62tp62nraetp62tra2yrbKtrbKtra2nra2nra2tp62traenoaehp6Gnoaehp6GcoZycnJaWnJaclpCQlpCQkIuQlpaQkJCLkIuFi5CLhYuLi4WAgIWAhYCFgICAgICAgICAenR0enRvb3RvdG9vdG9vdG90b290b2lvdG9vdG90b290b3RvaXQ=",V="data:audio/wav;base64,UklGRvoDAABXQVZFZm10IBAAAAABAAEAESsAABErAAABAAgAZGF0YdYDAAB6aVg8KxQPCRQfMEFeaYCQp7jD2uDr8Pb8//z8/Pb28Ovg2s/Jw7iyp6GQi4V6dGljWFJHQTY8QUFNUl5eWF5SRzwwJRoDAAAAAAAAAAAAAAAAAAAAAAAAAAAAAw8aHzA8R01eb3qAi5ansr7Jz9rg6/D////////////////////////////////////////////////26+vl4NTUycPDuLKnoZyWlouFgHp0b2ljXl5SUk1NQUE8KxQAAAAAAAAAAAAAAAAPGis8TVJjaXR0gICAgICAenRvaWNpXlhSTUE8MCslHxoUDwkDAwAAAAMJGiUwMDAwKyUaDwkAAAAAAAAAAAAAAAAAAAAAAAAAAw8aJTA8R1hpdICLlqeyw8/a6/b////////////////////////////////////////////////////////////////////88PDr4NTPw8O4raehnJaLhYWAgHRvaWleWEcrDwAAAAAAAAAAAAAJGiU2R1JeaW90dHp6eoB6enR0b29jWFJNR0E2KysfFA8DAAAAAAAAAAAAAAMJDxQPFAkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADDxorNkdYY296hZahrb7J1ODr9v////////////////////////////////////////////////////////////bw6+Da1M/JvriyraecnJaLgICAenRvaWNeXlhBKw8AAAAAAAAAAAMPHzBBUl5pdICFi5CWlpCWkIuLhYB0b2NeUlJNPDYwKyUaDw8JAwAAAAAAAw8aHysrJSUfFA8DAAAAAAAAAAAAAAAAAAAAAAAAAAAAAw8fKzBBTV5peoCQnKe4w8/a5fD8///////////////////////////////////////////////////////////89uvl4NrUz8nDuLKyrZyWlouAgIB6dG9jXlhYUk1HR0E8NjArMCslHxofGhoaGhQUDw8JDwkPCQ8JDw8PCQ8PDxQaFBoUGh8aHx8fHyUlKysrMDYwNjw2PDxBR0FHTUdNUlJYXlheY2NpY2lpb290dHqAgICAgICAhYCFi4uFi4uQlpCWnJaclpyhnKGcoaGhoaehp62nra2tp62tsq2yrbKtrbKtrbKtrbKtsq2tsq2yraenraetp6Ghp6GnoaGhp6GcoaGhnJacnJyclpycnJaQkJaQlpCWkIuQi5CQi5CLhYuLi4WLhYWFi4WFgIWAgICAgICAgIB0enR6dG90dG9vdG90b3Rvb3RvdG9vdG90b29v",K="data:audio/wav;base64,UklGRjYEAABXQVZFZm10IBAAAAABAAEAESsAABErAAABAAgAZGF0YRIEAACAgHReRzYfFAkUHzBBWGmAi6Gyvs/a5fD8/Pz///z8/PDw5eDUz8m4uK2hlpCAgHpvY15STUE8NjZHR1JYXl5eUk1BPCUfDwAAAAAAAAAAAAAAAAAAAAAAAAAAAwkUGis2QUdYY3R6hZCcp7K4w8/a5ev2/P////////////////////////////////////////////z28Ovg2trPycO+uLKtp6GckIuQhYCAenR0aWleXlhSTU1BQTw8NjYwKyslJR8fGhoPAwAAAAAAAAAAAAAAAAAUJTZHUl5pb3qAhYWLhYuLi4WLgICAdHRvb2NYXlJNR0E8PDArJR8lKzZHTVheXlhYTUc8NisfFA8DAAAAAAAAAAAAAAMDDxQfKzA8R1Jjb3qAi5ansr7J1ODr9v////////////////////////////////////////////////////////////////zw6+Da2s/Jw76ysqeclpCLhYB6dHRpY15eUkdNRzw2NjArJR8aGhoUDwMAAAAAAAAAAAAAAAAAAA8fMDxNWF5jaXR0enqAenp0dG9pY15YUk1BPDYwMCUfGhQPCQMAAwAJGh8rMDYwMCsfGg8DAAAAAAAAAAAAAAAAAAAAAAAAAAAPFB8rNkFSXml6gJCcp7i+z9rl8Pz////////////////////////////////////////////////////////////88Ovl4NrPycO+uLKyp6GckIuFgIWAdG9vaV5YTUdBPDw2NjAwKyslHxoUAwAAAAAAAAAAAAAAAA8aMEFSXm96gICFhYuLkIuQi4uFgIB0dG9jXlhSUkc8NjArJR8aFBoUGiswPEFBQUdBNjArHxQJAwAAAAAAAAAAAAAAAAAAAAAJFBorMDxNWGl0gIWQoa2+ydTa5fD8//////////////////////////////////////////////////////////z28Ovg2tTJw7i4sqehnJaQi4CAgHR0b2NjXlhSUk1NQTw2NjArKyUfHxoUGhQPDxQPDw8PCQkJCQ8JCQ8JAwkPDwkPCQ8PFA8UGhoUHx8fJR8lJSsrMDYwNjY8PEFBR0dNTVJSWFheY15jaWlvdG90dHp6gICAhYCFi4WLkIuQkJacnJyWnKGcoZyhoaenraenraetraenra2yrbKtsrKtsrKtsq2ysq2tsq2yuLK4sq2ysq2yrbKyra2ysq2nrbKtp6etp62noaehoZyWlpyWkJCWkJCWkIuLkIuQi5CLhYWFi4WLhYCFhYCAhYCFgIWAhYCAgICAgICAgICAgIB6gHqAenp6dHp0dHp6dHp0b3R0b290b3RvdG9vb3RvdG90b290b29vb290",X="data:audio/wav;base64,UklGRkIEAABXQVZFZm10IBAAAAABAAEAESsAABErAAABAAgAZGF0YR4EAACAgIWFgIWAdF5HNh8UDxQfNkdYb4CWobjJ2uDw8Pz////////89vbr5drUycO4raGckIuAem9pXlJNR0E2PEFNUl5eXlhYRzwwJRQJAAAAAAAAAAAAAAAAAAAAAAAAAAAAAxQfKzY8TV5pdHqFkJyhsr7D1Nrl8Pb////////////////////////////////////////////////28Ovr4NTPycO4uK2toZyWkIWAgHp6dGlpY15YWE1NQUE8PDArHx8aGhQaFA8UDw8PCQkPCQkJCQMDCQkJAwAAAAAAAAAAAAAAAAAPJTZNXm+AhZCcoa2tuL6+uL64uLitraennJyQhYCAenpvaV5eWE1HR01YY296eoB6dG9pXlJHPDAlHx8UDwkJAwMDCQMPFBQfJSs2QU1YY296gJCcobK+w9Tg5fD8/////////////////////////////////////////////////////////////Pbr5drUz8m+vrKnoZyQi4CAenRvY15YUk1HQTw8NjArKx8fGhoUDwkJAwADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFCU8TV5pdICAhYuQlpaclpaQkIuFgIB6dG9pY15YUk1HQTwwMCsrKzZBTV5eY2NeWE1BNisfGg8DAAAAAAAAAAAAAAAAAwkUGiUwPE1SXm96gIuWp7K+ydrl8Pb////////////////////////////////////////////////////////////89vDr5drUz8nDuLKtoZyWkJCFgIB0b2lpY1hSUk1HQTw2NjArKyUfHxoaFBQPFAkJCQkJAwMDAAADAAMAAAADAAMAAwkDCQ8JDxQPFBQaHxofJSslKzA2NjA2PDxBQUdHTU1SWF5YWF5jaWlvb3R6enSAgICAhYCFi5CQi5CQlpCWlpyWnJyhoaenp6etp62tsrKyrbKtsriyuLK4uLi+uLi4uLi+uL64vr64uL64vriysriyuLi4srKtsq2tsq2np62nra2nraehoaehp6GcoZycnJyWnJaclpCQlpCQi5CLhYWLhYWLhYWAhYCAgICAgICAgICAgICAenqAeoB6gHp0dHp0enRvdHRvb3Rvb3RvaW9vaW9pb2lpaWljaWNpY2ljaW9pb29paWljaWlpY2lpY2lvaW9paW9vaW9pb29vdHRvdG90dG90b290b3R0dHR6dHR6dHp6dHR6dHp0b3RvdHR0enp0enR6dHqAeoCAgHqAgICAgICAgICAgICFgIWFgICFhYCFi4uFi4WLkIuFi5CLhYuLi5CLi5CQi5CQi5CQi4uQi5CQi4uQi5CLkIuQi5CQi5CLi4uLi5CLkJCLkJCLi5CLkJCLkIuLkJCLkIuQi4uL",q="/space-invaders/assets/invader1-y-Esrj8m.png",_="/space-invaders/assets/invader2-3--_PfJaBe.png",$="/space-invaders/assets/invader3-4-xt5MqcZj.png";class ee{constructor(e){s(this,"props");s(this,"invadersCount",55);s(this,"invader1",new Image);s(this,"invader2_3",new Image);s(this,"invader3_4",new Image);s(this,"animationSpeed",70);s(this,"livingInvaders",[]);s(this,"speed",5);s(this,"currentDirection");s(this,"moveSounds");s(this,"moveCount",0);s(this,"updateDirection",()=>{const{game:e}=this.props,t=this.livingInvaders.some(n=>n.props.x<=5),i=this.livingInvaders.some(n=>n.props.x+n.props.width+5>=e.props.gameWidth);t&&(this.currentDirection="right"),i&&(this.currentDirection="left")});s(this,"createInvaders",()=>{const{game:e}=this.props,t=32,i=24,n=20,a=30,o=30,d=[];for(let A=0;A<this.invadersCount;A++){const c=A%11*(t+n-5)+o,l=Math.floor(A/11)*(i+n)+a;if(A<11){const p=new I({x:c,y:l,width:t,height:i,speed:this.speed,image:this.invader1,animationSpeed:this.animationSpeed,game:e,points:30});d.push(p)}if(A<33&&A>=11){const p=new I({x:c,y:l,width:t,height:i,speed:this.speed,image:this.invader2_3,animationSpeed:this.animationSpeed,game:e,points:20});d.push(p)}if(A<55&&A>=33){const p=new I({x:c,y:l,width:t,height:i,speed:this.speed,image:this.invader3_4,animationSpeed:this.animationSpeed,game:e,points:10});d.push(p)}}this.livingInvaders=d});s(this,"updateInvaders",()=>{const{game:e}=this.props,t=this.livingInvaders.length;let i=!1;if(this.animationSpeed>0&&(t<44&&this.animationSpeed!=35&&this.speed!=6&&(this.speed=6,this.animationSpeed=35,i=!0),t<33&&this.animationSpeed!=20&&this.speed!=7&&(this.speed=7,this.animationSpeed=20,i=!0),t<22&&this.animationSpeed!=10&&this.speed!=8&&(this.speed=8,this.animationSpeed=10,i=!0),t<11&&this.animationSpeed!=8&&this.speed!=10&&(this.speed=10,this.animationSpeed=8,i=!0),t===1&&this.animationSpeed!=4&&this.speed!=11&&(this.speed=20,this.animationSpeed=4,i=!0),i&&(this.livingInvaders.forEach(n=>{n.props.speed=this.speed,n.props.animationSpeed=this.animationSpeed}),i=!1)),this.livingInvaders.length>0&&e.gameFrame%this.animationSpeed===0&&(this.updateDirection(),this.livingInvaders.forEach(n=>{n.updateInvader(this.currentDirection)}),this.moveCount>=3?this.moveCount=0:this.moveCount++,e.playSound&&this.moveSounds[this.moveCount.toString()].play()),this.livingInvaders.length>0&&e.gameFrame%this.animationSpeed===0){const n=Math.floor(Math.random()*this.livingInvaders.length);e.gameFrame%25===0&&e.projectiles.invader.length<3&&e.projectiles.invader.push(this.livingInvaders[n].fire())}this.livingInvaders.some(n=>n.props.y>550)&&(e.gameService.setGameOverMessage("Invaders have reached the ground! You lose!"),e.gameService.setGameOver(!0)),this.livingInvaders.length===0&&(e.gameService.setGameOverMessage("You win!"),e.gameService.setGameOver(!0),this.speed=6,this.animationSpeed=35)});s(this,"draw",()=>{this.livingInvaders.forEach(e=>e.draw())});s(this,"destroy",()=>{this.invadersCount=0,this.livingInvaders=[]});this.props=e,this.invader1.src=q,this.invader2_3.src=_,this.invader3_4.src=$,this.currentDirection="right",this.moveSounds={0:new Audio(z),1:new Audio(V),2:new Audio(K),3:new Audio(X)},this.createInvaders()}}class te{constructor(e){s(this,"props");s(this,"defender");s(this,"invader");s(this,"defenderProjectilesToRemove");s(this,"invaderProjectilesToRemove");s(this,"update",()=>{this.checkOutOfBounds(),this.defender.forEach(e=>e.update()),this.invader.forEach(e=>e.update())});s(this,"draw",()=>{this.defender.forEach(e=>e.draw()),this.invader.forEach(e=>e.draw())});s(this,"checkOutOfBounds",()=>{var t;const{gameHeight:e}=this.props.game.props;this.defenderProjectilesToRemove=[],this.invaderProjectilesToRemove=[],this.defender.forEach((i,n)=>{i.props.y<0&&this.defenderProjectilesToRemove.push({index:n})}),this.invader.forEach((i,n)=>{i.props.y>e&&this.invaderProjectilesToRemove.push({index:n})}),(this.invaderProjectilesToRemove.length>0||this.defenderProjectilesToRemove.length>0)&&((t=this.defenderProjectilesToRemove)==null||t.forEach(i=>this.defender.splice(i.index,1)),this.invaderProjectilesToRemove.forEach(i=>this.invader.splice(i.index,1)))});this.props=e,this.defender=[],this.invader=[],this.defenderProjectilesToRemove=[],this.invaderProjectilesToRemove=[]}}class v{constructor(e){s(this,"props");s(this,"allParticles",{});s(this,"getShape",()=>{const{x:e,y:t}=this.props,i=[{x:e+0,y:t+0},{x:e+0,y:t-40},{x:e+18.1,y:t-60},{x:e+51.5,y:t-60},{x:e+68.1,y:t-40},{x:e+68.1,y:t+0},{x:e+51.5,y:t+0},{x:e+51.5,y:t-8},{x:e+44.8,y:t-18},{x:e+24.8,y:t-18},{x:e+18.1,y:t-8},{x:e+18.1,y:t+0}];let n=1/0,a=-1/0;i.forEach(o=>{n=Math.min(n,o.y),a=Math.max(a,o.y)});for(let o=n;o<=a;o++){const d=[];for(let A=0;A<i.length;A++){const c=i[A],l=i[(A+1)%i.length];if(c.y<=o&&o<l.y||l.y<=o&&o<c.y){const p=(c.x*(l.y-o)+l.x*(o-c.y))/(l.y-c.y);d.push(p)}}d.sort((A,c)=>A-c);for(let A=0;A<d.length;A+=2){const c=Math.ceil(d[A]),l=Math.floor(d[A+1]);for(let p=c;p<=l;p++)this.allParticles[`${p}x${o}`]=!0}}});this.props=e,this.getShape()}}class x{constructor(e){s(this,"shieldArray",[]);s(this,"props");s(this,"allParticles",{});s(this,"explosionRadius",2);s(this,"explosionHeight",5);s(this,"explosionChance",.5);s(this,"offScreenCanvas");s(this,"offScreenContext");s(this,"createShields",e=>{const{game:t}=this.props,i=68,n=(e-4*i)/5;this.shieldArray.push(new v({x:n,y:500,game:t})),this.shieldArray.push(new v({x:n+i+n,y:500,game:t})),this.shieldArray.push(new v({x:n+2*i+2*n,y:500,game:t})),this.shieldArray.push(new v({x:n+3*i+3*n,y:500,game:t})),this.shieldArray.forEach(a=>{this.allParticles={...this.allParticles,...a.allParticles}}),this.allParticles});s(this,"destroy",()=>{this.shieldArray=[]});this.props=e,this.createShields(e.game.props.gameWidth),this.offScreenCanvas=document.createElement("canvas"),this.offScreenCanvas.width=e.game.props.gameWidth,this.offScreenCanvas.height=e.game.props.gameHeight,this.offScreenContext=this.offScreenCanvas.getContext("2d"),this.drawParticles()}draw(){const{context:e}=this.props.game.props;e.drawImage(this.offScreenCanvas,0,0)}drawParticles(){var e;(e=this.offScreenContext)==null||e.clearRect(0,0,this.offScreenCanvas.width,this.offScreenCanvas.height),Object.keys(this.allParticles).flatMap(t=>{if(this.allParticles[t]){const[i,n]=t.split("x");this.offScreenContext&&(this.offScreenContext.fillStyle="#00d300",this.offScreenContext.fillRect(parseInt(i),parseInt(n),1,1))}})}}class se{constructor(e){s(this,"props");s(this,"handleCollision",()=>{const{projectiles:e,defender:t}=this.props.game,{game:i}=this.props;e.invader.some(n=>n.props.y>i.props.gameHeight-500)&&e.invader.forEach(n=>{const{x:a,y:o,width:d,height:A}=n.props;a<t.x+t.width&&a+d>t.x&&o<t.y+17+(t.height-23)&&o+A>t.y+17&&t.lives>0&&(t.isCollided=!0,t.lives--,e.invader.splice(e.invader.indexOf(n),1),t.previousAnimationSpeed=t.props.game.invaders.animationSpeed,t.props.game.invaders.animationSpeed=0,t.props.game.playSound&&t.defenderDeath.play())})});this.props=e}}class ie{constructor(e){s(this,"props");s(this,"handleCollision",()=>{const e=[],t=[],{game:i}=this.props,{invaders:n}=this.props.game;if(n.livingInvaders.forEach((a,o)=>{i.projectiles.defender.forEach((d,A)=>{d.props.x>a.props.x&&d.props.x<a.props.x+a.props.width&&d.props.y>a.props.y&&d.props.y<a.props.y+a.props.height&&(e.push({index:A}),t.push({index:o}),i.scoreService.score+=a.props.points)})}),e.length>0||t.length>0){for(let a=t.length-1;a>=0;a--){const o=n.livingInvaders[t[a].index].props.x,d=n.livingInvaders[t[a].index].props.y;i.explosions.add(o,d),i.playSound&&n.livingInvaders[t[a].index].invaderDeath.play(),n.livingInvaders.splice(t[a].index,1)}for(let a=e.length-1;a>=0;a--)i.projectiles.defender.splice(e[a].index,1)}});this.props=e}}class ne{constructor(e){s(this,"props");this.props=e}handleCollision(){const{projectiles:e,invaders:t,shields:i}=this.props.game,n=[],a=[];e.defender.forEach((o,d)=>{const A=o.props.x,c=o.props.x+o.props.width,l=o.props.y,p=o.props.y+o.props.height;this.collideWithShield(A,c,l,p,!0)&&(n.push({index:d}),i.drawParticles())}),e.invader.forEach((o,d)=>{const A=o.props.x,c=o.props.x+o.props.width,l=o.props.y,p=o.props.y+o.props.height;this.collideWithShield(A,c,l,p,!0)&&(a.push({index:d}),i.drawParticles())}),t.livingInvaders.forEach(o=>{const d=o.props.x,A=o.props.x+o.props.width,c=o.props.y,l=o.props.y+o.props.height;this.collideWithShield(d,A,c,l,!1)&&i.drawParticles()}),n==null||n.forEach(o=>e.defender.splice(o.index,1)),a.forEach(o=>e.invader.splice(o.index,1))}collideWithShield(e,t,i,n,a){const{shields:o}=this.props.game;let d=!1;for(let A=e;A<=t;A++)for(let c=i;c<=n;c++){const l=`${A}x${c}`;o.allParticles[l]&&(o.allParticles[l]=!1,d=!0)}if(d&&a){const A=e-o.explosionRadius,c=t+o.explosionRadius,l=i-o.explosionHeight,p=n+o.explosionHeight;for(let u=A;u<=c;u++)for(let w=l;w<=p;w++){const S=`${u}x${w}`;o.allParticles[S]&&o.explosionChance>Math.random()&&(o.allParticles[S]=!1)}}return d}}class oe{constructor(e){s(this,"props");s(this,"shields");s(this,"defender");s(this,"invaders");this.props=e,this.shields=new ne(e),this.defender=new se(e),this.invaders=new ie(e)}handleCollisions(){const{game:e}=this.props;e.shieldsOn&&this.shields.handleCollision(),e.godMode||this.defender.handleCollision(),this.invaders.handleCollision()}}class R{constructor(e){s(this,"props");s(this,"gameFrame",0);s(this,"inputHandler");s(this,"defender");s(this,"invaders");s(this,"shields");s(this,"projectiles");s(this,"explosions");s(this,"playSound",!1);s(this,"godMode");s(this,"shieldsOn");s(this,"gameService");s(this,"livesService");s(this,"scoreService");s(this,"collisionService");s(this,"update",()=>{this.projectiles.update(),this.invaders.updateInvaders(),this.defender.update(),this.collisionService.handleCollisions()});s(this,"draw",()=>{const{context:e,gameWidth:t,gameHeight:i}=this.props;this.gameFrame++,e.clearRect(0,0,t,i),this.projectiles.draw(),this.invaders.draw(),this.defender.draw(),this.explosions.draw(),this.shieldsOn&&this.shields.draw(),window.innerWidth>600&&this.gameService.drawInstructions(),this.scoreService.drawHighscore(),this.livesService.drawLives()});s(this,"setGameSize",(e,t)=>{this.props.gameWidth=e,this.props.gameHeight=t});s(this,"destroy",()=>{this.inputHandler.destroy(),this.invaders.destroy(),this.shields.destroy(),this.defender.destroy()});this.props=e,this.godMode=e.godMode,this.shieldsOn=e.shieldsOn,this.inputHandler=new j(this),this.shields=new x({game:this}),this.invaders=new ee({game:this}),this.defender=new H({game:this}),this.projectiles=new te({game:this}),this.explosions=new P({game:this}),this.gameService=new B({game:this}),this.livesService=new D({defender:this.defender,context:e.context,gameWidth:e.gameWidth}),this.scoreService=new k({context:e.context}),this.collisionService=new oe({game:this}),this.shields.draw()}}let h,m;const y=600,f=600;document.addEventListener("DOMContentLoaded",()=>{const r=document.querySelector("#game-canvas");if(r.addEventListener("click",M),r){const e=r.getContext("2d");r.width=y,r.height=f,e&&(h=new R({context:e,gameWidth:y,gameHeight:f,godMode:!1,shieldsOn:!0}),m=new E({game:h}),C())}});const M=()=>{if(h!=null&&h.gameService.isGameOver){const r=document.querySelector("#game-canvas");if(r.addEventListener("click",M),r){const e=r.getContext("2d");if(r.width=y,r.height=f,e){let t=h.scoreService.score,i=h.shields,n=h.defender.x;h.gameService.gameOverMessage!=="You win!"&&(t=0,i=new x({game:h}),n=50),h.destroy(),h=new R({context:e,gameWidth:y,gameHeight:f,godMode:h.godMode,shieldsOn:h.shieldsOn}),h.scoreService.score=t,h.shields=i,h.defender.x=n,m&&(m.props.game=h),C()}}}},C=()=>{if(h==null||h.update(),h==null||h.draw(),h!=null&&h.gameService.isGameOver){h==null||h.gameService.drawGameOver(),h.gameService.gameOverMessage!=="You win!"&&(m==null||m.saveHighscore());return}requestAnimationFrame(C)};window.addEventListener("beforeunload",()=>{h==null||h.destroy()});
