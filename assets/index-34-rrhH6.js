var W=Object.defineProperty;var M=(r,e,i)=>e in r?W(r,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):r[e]=i;var t=(r,e,i)=>(M(r,typeof e!="symbol"?e+"":e,i),i);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const A of o)if(A.type==="childList")for(const n of A.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&s(n)}).observe(document,{childList:!0,subtree:!0});function i(o){const A={};return o.integrity&&(A.integrity=o.integrity),o.referrerPolicy&&(A.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?A.credentials="include":o.crossOrigin==="anonymous"?A.credentials="omit":A.credentials="same-origin",A}function s(o){if(o.ep)return;o.ep=!0;const A=i(o);fetch(o.href,A)}})();class Y{constructor(e){t(this,"props");t(this,"godModeButton");t(this,"shieldsOnButton");t(this,"highscoreButton");t(this,"changeLogButton");t(this,"isDevelopment",!1);t(this,"init",()=>{if(this.godModeButton&&this.shieldsOnButton&&(this.godModeButton.addEventListener("click",this.onGodModeButtonClick),this.shieldsOnButton.addEventListener("click",this.onShieldsOnButtonClick),this.isDevelopment||(this.godModeButton.style.display="none",this.shieldsOnButton.style.display="none"),this.isDevelopment)){this.godModeButton.style.display="block",this.shieldsOnButton.style.display="block";const{game:e}=this.props;e.godMode&&this.godModeButton.classList.add("active"),e.shieldsOn&&this.shieldsOnButton.classList.add("active")}this.highscoreButton&&this.changeLogButton&&(this.highscoreButton.addEventListener("click",this.onHighscoreButtonClick),this.changeLogButton.addEventListener("click",this.onChangeLogButtonClick))});t(this,"onGodModeButtonClick",()=>{var i,s;const{game:e}=this.props;e.godMode=!e.godMode,e.godMode?(i=this.godModeButton)==null||i.classList.add("active"):(s=this.godModeButton)==null||s.classList.remove("active")});t(this,"onShieldsOnButtonClick",()=>{var i,s;const{game:e}=this.props;e.shieldsOn=!e.shieldsOn,e.shieldsOn?(i=this.shieldsOnButton)==null||i.classList.add("active"):(s=this.shieldsOnButton)==null||s.classList.remove("active")});t(this,"showPopup",e=>{const i=document.createElement("div");i.classList.add("popup-wrapper");const s=document.createElement("div");s.classList.add("popup");const o=document.createElement("p");o.innerText=e,s.appendChild(o);const A=document.createElement("button");A.innerText="X",A.style.marginTop="10px",A.classList.add("close-button"),s.prepend(A),i.appendChild(s),document.body.appendChild(i),A.addEventListener("click",function(){document.body.removeChild(i)}),i.addEventListener("click",function(n){n.target===i&&document.body.removeChild(i)}),s.addEventListener("click",function(n){n.stopPropagation()})});t(this,"onHighscoreButtonClick",()=>{this.showPopup("Highscores feature is currently under construction.")});t(this,"onChangeLogButtonClick",()=>{this.showPopup("Check back soon for updates!")});t(this,"destroy",()=>{this.godModeButton&&this.shieldsOnButton&&(this.godModeButton.removeEventListener("click",this.onGodModeButtonClick),this.shieldsOnButton.removeEventListener("click",this.onShieldsOnButtonClick)),this.highscoreButton&&this.changeLogButton&&(this.highscoreButton.removeEventListener("click",this.onHighscoreButtonClick),this.changeLogButton.removeEventListener("click",this.onChangeLogButtonClick))});this.props=e,this.godModeButton=document.querySelector("#god-mode-button"),this.shieldsOnButton=document.querySelector("#shields-on-button"),this.highscoreButton=document.querySelector("#highscore-button"),this.changeLogButton=document.querySelector("#change-log-button"),this.init()}}const g=(r,e)=>{if(e){const{alignment:i,fillStyle:s,font:o,text:A,x:n,y:h}=e;r.fillStyle=s,r.font=o,r.textAlign=i,r.fillText(A,n,h)}};class G{constructor(e){t(this,"props");t(this,"gameOverMessage","");t(this,"isGameOver",!1);t(this,"handleResize",()=>{var s,o;const{innerWidth:e}=window,{inputHandler:i}=this.props.game;e<600?(s=i.mobileControls)==null||s.classList.add("show-mobile-controls"):(o=i.mobileControls)==null||o.classList.remove("show-mobile-controls")});t(this,"drawGameOver",()=>{const{context:e,gameWidth:i,gameHeight:s}=this.props.game.props;e.fillStyle="rgba(0, 0, 0, 0.7)",e.fillRect(0,0,i,s),g(e,{alignment:"center",fillStyle:"white",font:"48px Arial",text:"GAME OVER",x:i/2,y:s/2.2}),g(e,{alignment:"center",fillStyle:this.gameOverMessage==="You win!"?"green":"red",font:"24px Arial",text:this.gameOverMessage??"",x:i/2,y:s/2.2+50}),g(e,{alignment:"center",fillStyle:"white",font:"18px Arial",text:"Click anywhere to reset",x:i/2,y:s/2.2+100})});t(this,"setGameOver",e=>{this.isGameOver=e});t(this,"setGameOverMessage",e=>{this.gameOverMessage=e});this.props=e,window.addEventListener("resize",this.handleResize)}}class L{constructor(e){t(this,"props");t(this,"score",0);t(this,"drawHighscore",()=>{const{context:e}=this.props;g(e,{alignment:"center",fillStyle:"white",font:"bold 15px Arial",text:"SCORE ",x:40,y:20}),g(e,{alignment:"center",fillStyle:"white",font:"bold 15px Arial",text:this.score.toString(),x:80,y:20})});this.props=e}}class B{constructor(e){t(this,"props");t(this,"drawLives",()=>{const{context:e,gameWidth:i,defender:s}=this.props,o=s.lives.toString();g(e,{alignment:"center",fillStyle:"white",font:"bold 15px Arial",text:o,x:i-80,y:20});for(let A=0;A<s.lives-1;A++){const n=i-65+A*30;e.drawImage(s.image,n,3,20,20)}});this.props=e}}const D="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAACXBIWXMAAAsTAAALEwEAmpwYAAAHXGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDggNzkuMTY0MDM2LCAyMDE5LzA4LzEzLTAxOjA2OjU3ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjEuMCAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDIzLTA1LTE4VDA0OjA0OjAzKzAyOjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDIzLTA1LTIxVDIwOjA1OjMwKzAyOjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyMy0wNS0yMVQyMDowNTozMCswMjowMCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpiMmU4NDYwMC1jNjI5LTM3NDItYTlmZS1hOWM2YjM4OGViYmIiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDo0ZWUyNzlmNC1jNzliLTk1NDYtYWEyNi01NWMyYjI2ZmViMDQiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpjN2EwZGVkNy03YjdhLTM0NDItYWQ0NS1jYzFkZWI0NmVkNDEiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmM3YTBkZWQ3LTdiN2EtMzQ0Mi1hZDQ1LWNjMWRlYjQ2ZWQ0MSIgc3RFdnQ6d2hlbj0iMjAyMy0wNS0xOFQwNDowNDowMyswMjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDIxLjAgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDphOTA5YzlkMi0wZTMwLTdiNDItOWI5OC1hMjIzODUyYTlhMzYiIHN0RXZ0OndoZW49IjIwMjMtMDUtMThUMDQ6MDQ6MDMrMDI6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyMS4wIChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6YjJlODQ2MDAtYzYyOS0zNzQyLWE5ZmUtYTljNmIzODhlYmJiIiBzdEV2dDp3aGVuPSIyMDIzLTA1LTIxVDIwOjA1OjMwKzAyOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjEuMCAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDxwaG90b3Nob3A6RG9jdW1lbnRBbmNlc3RvcnM+IDxyZGY6QmFnPiA8cmRmOmxpPmFkb2JlOmRvY2lkOnBob3Rvc2hvcDo0ZWUyNzlmNC1jNzliLTk1NDYtYWEyNi01NWMyYjI2ZmViMDQ8L3JkZjpsaT4gPC9yZGY6QmFnPiA8L3Bob3Rvc2hvcDpEb2N1bWVudEFuY2VzdG9ycz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7GEJs+AAABBUlEQVRoge2aMQ6CQBBF/5otLL0AVFpqxZU8lVciege4gKXd2ghZVwIqs/AzmVeREHb2MTObIcGFEKCBzdobkMJE2DARNtSIuP31mG3xtm7Ss90VVZklVvaMFFWJXJuPUVNaXnrBgXKKCW3ddNeiZSaakVQi3ujApmOp2YhnZOwtx/fausHjfAcAHG6n2XHV9IgaEfHS+oXtZQdgvBy/RU1GVhXpml0Cy4gEXY9IoCYjb6fWxHiRg/CK++/z/ZjzcfwuMalKxEnl1ZSWGhG/Ql9I0k/QHliuLyRJJ2k1pWUibJgIGybChomwYSJsmAgbJsKGB2Z9/NPg7BcOMkyEDRNhQ43IE/r/PxbElTYPAAAAAElFTkSuQmCC",E="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAsCAYAAACHUEHxAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ4IDc5LjE2NDAzNiwgMjAxOS8wOC8xMy0wMTowNjo1NyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDIxLjAgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjY0RDEwMzNCMTM2QzExRUU4NkY3OTZENzlBMzU2QzM0IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjY0RDEwMzNDMTM2QzExRUU4NkY3OTZENzlBMzU2QzM0Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NjREMTAzMzkxMzZDMTFFRTg2Rjc5NkQ3OUEzNTZDMzQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NjREMTAzM0ExMzZDMTFFRTg2Rjc5NkQ3OUEzNTZDMzQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6BnJ69AAACk0lEQVR42uxcPU7GMAxtUAZGLgAbKxISV+JUXAkJiZUNLsDIFr6ir1Lp1zZOYqd28t6ChGjjus/PP0lxIYRBEtcvN3sLuJ/n7wFoD77GIrdPdxe/+3r9hPdBLMCKCmuxDcRqUIU12HYFigBQrM7S6iltOaupH8RC6hKxEakQsJsKMVoAsSTg1mTUOuE0267BNihWZrDAtuOJFWJOoHZGVraHsI2laEuH2nVo6KBixDgR6zA7pUibajvGDYBIesW4AbCbCgvrlQFHa3hruch1LHUhUqHx8UBuLbc1AuKyzUtHB5Bfv1hWa18jOjgjw8pMrPfdBtFUOEYcc9fhjPiVbKclRUrJWqLEGhdKIBcXSYtx//bw9/Pj8R2JOjNrqSjeKVFbM7JLCRXrxjaCpKk69WhiBYISubPyibfImiJeupaTrgG9JgfHHl66RdbSIROCaFrDZdy7Sq3KQqyYI6l7fi3WGtyBZ6XbTCJW5kOtRUcYANGAHlUvpSvnLhtSiLV5YO/8ACGRXIDCcoPr730sp8/PQ8Vuupce5hFRc3TQKOZqVLNJIQuEj5Fi2lagnEEC5BuL+XvSXG+RUqH2PasNBweF8yIzJUFp50silpHB3fKlhaUKc0Z4D3uBJZ0vjs1UVJ6eToAkEStj+h1LS6zXamoQCnwl6ttaSpusWKmDzZJBqNYhKlV5pO0vuH+9yTu+Vu4HU2BIqrq31q1IpQ4t/9lFg/JyEK7J4n1yTO53ia0fw578k7PHS/HRGKR+bYHlRUaGn0slKtqjpLbaFYt0Vl8t3uu/YDkfU3IlPvLWCmeKrTn1YskQuDdfdZsKt2oIbDvxdb4xX+JLaEAEIBYAYgF24HNaTcuQ+DC21+Hy3nP/CjAAkP91RszS5jcAAAAASUVORK5CYII=",k="/space-invaders/assets/explosion-4FMMjE7o.wav",J="/space-invaders/assets/shoot-SCjv8snc.wav";class S{constructor(e){t(this,"props");t(this,"shoot");this.props=e,this.shoot=new Audio(J)}update(){this.props.direction==="down"&&(this.props.y+=this.props.speed),this.props.direction==="up"&&(this.props.y-=this.props.speed)}draw(){const{context:e}=this.props.game.props;e.fillStyle=this.props.color,e.fillRect(this.props.x,this.props.y,this.props.width,this.props.height)}}class N{constructor(e){t(this,"props");t(this,"checkGameOver",()=>{const{defender:e}=this.props.game,{game:i}=this.props;return e.lives===0?(i.gameService.gameOverMessage="An invader shot you! You Lose!",i.gameService.setGameOver(!0),!0):!1});t(this,"animateFrame",()=>{const{game:e}=this.props,{defender:i}=this.props.game;e.gameFrame%10===0&&(i.frame=i.frame>0?0:1)});t(this,"handleHorizontalMovement",()=>{const{inputHandler:e}=this.props.game,{defender:i}=this.props.game;i.isCollided===!1&&(e.keys.includes("KeyD")?i.speed=i.maxSpeed:e.keys.includes("KeyA")?i.speed=-i.maxSpeed:i.speed=0,i.x+=i.speed)});t(this,"handleShooting",()=>{const{inputHandler:e,defender:i}=this.props.game,{game:s}=this.props;e.keys.includes("Enter")&&s.projectiles.defender.length===0&&i.isCollided===!1&&(i.reload||(s.projectiles.defender.push(this.fire()),i.reload=!0,i.timeout=setTimeout(()=>{i.reload=!1},200)))});t(this,"preventGoingOffScreen",()=>{const{defender:e}=this.props.game,{game:i}=this.props;e.x<0?e.x=0:e.x>i.props.gameWidth-e.width&&(e.x=i.props.gameWidth-e.width)});t(this,"fire",()=>{const{defender:e}=this.props.game,{game:i}=this.props,s=new S({height:10,width:2,speed:10,x:e.x+e.width/2-2,y:e.y,color:"#00d300",direction:"up",game:i});return i.playSound&&s.shoot.play(),s});this.props=e}}class U{constructor(e){t(this,"props");t(this,"width");t(this,"height");t(this,"x");t(this,"y");t(this,"speed");t(this,"maxSpeed");t(this,"timeout",setTimeout(()=>{},0));t(this,"reload",!1);t(this,"image");t(this,"explosionImage");t(this,"lives",3);t(this,"previousAnimationSpeed",0);t(this,"isCollided",!1);t(this,"collisionPause",0);t(this,"frame",0);t(this,"spriteWidth");t(this,"spriteHeight");t(this,"defenderDeath");t(this,"defenderService");t(this,"update",()=>{this.defenderService.checkGameOver()||(this.defenderService.animateFrame(),this.defenderService.handleHorizontalMovement(),this.defenderService.handleShooting(),this.defenderService.preventGoingOffScreen())});t(this,"destroy",()=>{clearTimeout(this.timeout)});this.props=e,this.width=42,this.height=40,this.x=50,this.y=e.game.props.gameHeight-(this.height+10),this.speed=0,this.maxSpeed=5,this.image=new Image,this.image.src=D,this.explosionImage=new Image,this.explosionImage.src=E,this.spriteWidth=75,this.spriteHeight=44,this.defenderDeath=new Audio(k),this.defenderService=new N(e)}draw(){const{context:e}=this.props.game.props;this.collisionPause>80&&(this.isCollided=!1,this.x=50,this.props.game.invaders.animationSpeed=this.previousAnimationSpeed,this.collisionPause=0),this.isCollided?(this.collisionPause++,e.drawImage(this.explosionImage,this.frame*this.spriteWidth,0,this.spriteWidth,this.spriteHeight,this.x,this.y-3,this.width+2,this.height)):e.drawImage(this.image,this.x,this.y,this.width,this.height)}}const O="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEMAAAAqCAMAAADf7xbTAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ4IDc5LjE2NDAzNiwgMjAxOS8wOC8xMy0wMTowNjo1NyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDIxLjAgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjFFQjkzOTJGMTM0QTExRUU5Njc0OUY2OTA2M0UxMzZDIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjFFQjkzOTMwMTM0QTExRUU5Njc0OUY2OTA2M0UxMzZDIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MUVCOTM5MkQxMzRBMTFFRTk2NzQ5RjY5MDYzRTEzNkMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MUVCOTM5MkUxMzRBMTFFRTk2NzQ5RjY5MDYzRTEzNkMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6zWk7IAAACGVBMVEX///8RERHq6up2dnZiYmITExNKSkqAgIDi4uIzMzMoKChbW1v29vYWFhbNzc3R0dGFhYUyMjJTU1NERETExMQ8PDxmZmaTk5ONjY3x8fE6OjrFxcWqqqre3t719fXu7u6enp74+Pirq6uXl5fc3Nz7+/vk5OSurq7W1tYXFxdAQEDLy8vp6ekxMTHU1NS9vb0UFBRkZGQ1NTVYWFi3t7d0dHR/f3/v7+8/Pz8QEBAZGRnKysofHx9aWlqlpaX09PTm5uZXV1c7OztZWVkcHByQkJBGRkYqKir5+fnMzMwLCwsJCQn8/PySkpLDw8PAwMDy8vIPDw9WVlYNDQ0vLy94eHhCQkJ6enr39/chISEiIiLBwcFra2u+vr4nJydsbGwaGho9PT0KCgo+Pj6ioqIjIyMmJiZvb29HR0ejo6O4uLi/v782NjapqamhoaHY2NgeHh5wcHCEhIRFRUU3Nzd1dXUVFRUbGxuRkZEICAh3d3eoqKh8fHxfX19jY2OGhoaCgoLIyMhDQ0Pj4+Pr6+sODg6UlJTGxsa7u7vw8PC0tLSKiorz8/NOTk5nZ2cSEhLS0tLPz8/V1dXo6OiZmZnOzs4YGBiYmJjJyckrKystLS2xsbFpaWlNTU15eXlBQUFgYGA4ODivr68gICCIiIhVVVWOjo4MDAyysrK6urq8vLzn5+cwMDCdnZ0sLCw5OTl7e3uPj4////9ic1e1AAAAs3RSTlP/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////AA8pv+gAAAKfSURBVHjaxJZnVxpBFIYXFRAMIkI0aowxVWIFa1RQQ0yBNIEUCNh716jpvffee+9tfmHmHQKEXVZ3z4nJ8+nOLQ8LZ3YGjvB5btYC31levpOle8sEA4QTZNaqObCZ31zP0lkZ8+aoNwCtXIfzEca+7GeOE6vAK7kOcx3GxtqYYysrbuM57r7WUZROmvHMIPzGc9QmY71jZzyH5+pyMJAJfrTSzPBxhF9HkP7ZJcXxm5QFyBbUICxiHdbYBgkOm8ChiW1oDzkOMYdlNfiwCEz3SnBoWOu5Sxizp/+xPyysr2SNBEcTW3IbBHuM72i6mE/Rd9DQcRphvkG2497LbIpBiV9vGGG2QrZjFkQdjmRw0rIQ6ESmfaw6/Zn1dgkcPemgckgPOkQcT26ieqGP9baLvLfGAvaYKhFH1RZU64pnfff/n8ORFME2I9kxHp1K6uduJES41Uq8zcuARsThHkH1jZ/URKcSDnONXISijcSpUAKniMPDqopOYoxOcRU8h1Tm3XFtKbCJjD5D8c5bviOQGKHNTEj3SvBOxDGE4pVJQvzRqUQ3/36xM3WziGMvinvS5rij/qrjvQK0HKQ5VwuLXXM6XKxPN7oEXCYkMJZLsV+nJe9jhLnfCfmIYt5kSO8SOMqCOZTBFxowTsjuTfjMUpxj1kL2cLsI0aJonUBnTqZZ4DCzM7i6PLyO6whRyZbb1/8TxxGBwyjD4V4MTKngPg7zh90s/oT06L64jtqnKZRjqSbKIG0J3ftBweZoCN/7DnSaKjIwpgo5ps7nURqPFlO8urCjVODIiv3vcOA2xoIhx7oSFBsiN4uYozrWoWZfvlCe44wMx8QKMCBwPEBaXy7JoVWBKYHjFNL9vrgOf18apaqHyMOoxliARr8EGACDXsBbedFuJQAAAABJRU5ErkJggg==";class Q{constructor(e){t(this,"props");t(this,"image",new Image);t(this,"width");t(this,"height");t(this,"lingerCount",0);t(this,"draw",()=>{const{context:e}=this.props.game.props;this.lingerCount++,e.drawImage(this.image,this.props.x-2,this.props.y-2,this.width,this.height)});this.props=e,this.width=35,this.height=25,this.image.src=O}}class Z{constructor(e){t(this,"props");t(this,"explosions",[]);t(this,"add",(e,i)=>{const s=new Q({x:e,y:i,game:this.props.game});this.explosions.push(s)});t(this,"draw",()=>{const e=[];this.explosions.forEach(i=>{i.draw(),i.lingerCount>=20&&e.push(this.explosions.indexOf(i))}),e.forEach(i=>{this.explosions.splice(i,1)})});this.props=e}}class T{constructor(e){t(this,"keys");t(this,"game");t(this,"mobileControls",document.querySelector(".mobile-controls"));t(this,"keydownHandler",e=>{e.preventDefault(),(e.code==="KeyW"||e.code==="KeyA"||e.code==="KeyD"||e.code==="Enter")&&this.keys.indexOf(e.code)===-1&&this.keys.push(e.code)});t(this,"keyupHandler",e=>{e.preventDefault(),(e.code==="KeyA"||e.code==="KeyD"||e.code==="Enter")&&this.keys.splice(this.keys.indexOf(e.code),1)});t(this,"createMobileControls",()=>{var o,A,n;(o=this.mobileControls)!=null&&o.children.length&&(this.mobileControls.innerHTML="");const e=document.createElement("button");e.id="left-button",e.innerHTML="&lt;",e.addEventListener("touchstart",this.onLeftButtonTouchStart,{passive:!0}),e.addEventListener("touchend",this.onLeftButtonTouchEnd,{passive:!0}),e.addEventListener("mousedown",this.onLeftButtonTouchStart),e.addEventListener("mouseup",this.onLeftButtonTouchEnd);const i=document.createElement("button");i.id="fire-button",i.innerHTML="FIRE",i.addEventListener("touchstart",this.onFireButtonTouchStart,{passive:!0}),i.addEventListener("touchend",this.onFireButtonTouchEnd,{passive:!0}),i.addEventListener("mousedown",this.onFireButtonTouchStart),i.addEventListener("mouseup",this.onFireButtonTouchEnd);const s=document.createElement("button");s.id="right-button",s.innerHTML="&gt;",s.addEventListener("touchstart",this.onRightButtonTouchStart,{passive:!0}),s.addEventListener("touchend",this.onRightButtonTouchEnd,{passive:!0}),s.addEventListener("mousedown",this.onRightButtonTouchStart),s.addEventListener("mouseup",this.onRightButtonTouchEnd),(A=this.mobileControls)==null||A.append(e,i,s),window.innerWidth<600&&((n=this.mobileControls)==null||n.classList.add("show-mobile-controls"))});t(this,"onLeftButtonTouchStart",()=>{this.keys.push("KeyA")});t(this,"onRightButtonTouchStart",()=>{this.keys.push("KeyD")});t(this,"onFireButtonTouchStart",()=>{this.keys.push("Enter")});t(this,"onLeftButtonTouchEnd",()=>{this.keys.splice(this.keys.indexOf("KeyA"),1)});t(this,"onRightButtonTouchEnd",()=>{this.keys.splice(this.keys.indexOf("KeyD"),1)});t(this,"onFireButtonTouchEnd",()=>{this.keys.splice(this.keys.indexOf("Enter"),1)});t(this,"destroy",()=>{window.removeEventListener("keydown",this.keydownHandler),window.removeEventListener("keyup",this.keyupHandler)});this.keys=[],this.game=e,addEventListener("keydown",this.keydownHandler),addEventListener("keyup",this.keyupHandler),this.createMobileControls()}}const H="data:audio/wav;base64,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QS9Jy/cbJpHO2x4Qm+CYLHTLsSUcxuNSL5nHeyxn24IqqcV4NCm871Axtc5ELaPEpiMl47QpXN2qKWXTrC4ox981PIrathtqyYIxMbzqcy6Jy1gxrsR3NUHS0h8gwtZIM8bHMiun0E8yvM1VMYjBoCsh2dxPN2fOxyQx270pTNXGJCa32GM+WcrqLyinxl4ttsJaPEXW2ixN0rwhLYvVzSQy2b8qK7nXWkVkzNwiPdC6KSWozoA5cc2sKUTcozJTztcwKaLCfD5GvuBBO824KTTQxz0xkcpwPZPKji9pzJMtZM+cL1nOsCFqzXRAVcXaPjt8yLMhXM+JMW7Cqig726gvXc66JzSV1bglQtG/LSrKuDJJheC6I3C/li0qyc5GPqDCdjxpz6wuQ83DLEjOtSwxtchrQnTGriszpNh5M6+zWT1f0p41ZM26JzOpzndBWLfTOzzIsDs9dMu+KUvUsS47xcRBRKTDaTmotVdCbcm/KDPAwnhAUM3LMjbDtk9JY9K+MlPLwC04rrxWQcSwLk/QqTFEwcZkRlTKxyxBfc+1M1HIvi88rLhUQ7y5VEGQw2tJb8LOPD2VuG88p7FoRVDOwDpPx603U4zNrx0vtbhOU2bDzDZJa8a7L06QzYI8Xr3BQkFyxJg0h7aJOkTPxE5FmrZdSZ27aE1nts9FSMCqQD+msVpVabzMQ0vGq0BMaMbLQUl5vrErSJ3FpzJByqRCWJHSij9fuL5KRG+/uCpHyaw5UpXGri9Au7RHV8GfOFLDrT5SuLNLS5y4aEWUtWlKdMCyMkiot2FMi7KWM1zEmTdQw7dBV8OTQlmnv2hMbL+iNVK9skNPdcK9MEaWuXRFoaZrTlnEuTlWwKQ+Uqm2YEydqnlBcr11TmyrxXQ8c7R9R2G9tTxZw6I/TJW4eEaiqFBUm7hpUG6vuERTlrGYMUe7r2BPYbi1R1Sqq1ZUg8CnNE2nsm9LW7O5V1GNs3JTba28VVJwuqo3W8CjPE6dtW1UirmVPVOrtnVKWMGuQ1Z4v7Q0VaiuWlK0nFVVb8GkQWOtsGtHYLuiQWK4o0hauaVIU5yve0l0vYVQc7yfO1aFxZ0/bbadOlKdsnlLXJXCg0RXn7ZqTXmzh0prtKBBW6mpaE5js61JX7mgSlmAtqM5Xb6fRlavn1JikrqZP1O0plZYkKt5Umq4pEpdnatoVIG1lEBcisCmN1e4mEZdn7BpWJugclB8tXpSf7OWQlitq1del6uFRWq5g01njcWJSX+nhEZWo7FpWYarhUpquo9NaaymT1iOqnpQaZK+h0dfrpxJYn66n0FajbKLS2WtnEpinKh7S3Owj0VluZFLareVS2GgpGBgp5plUoymZGR3n7NcXoKwmz9WnaRoXIWvj0hmqpZVY6OlZFtwlbl1UIGib1eMpG9cjqOATnGwjUxiraJqW3KzlEppo6NkWZGZY2SIsX9Wcoq4iUVeo6BdY3qxnEhelqRtYIirg1Jpk69pW5eWaGBrkrh2WJCYbF93sZVIZnywpVRgiKWCUGyrl1JojaqFU2eWrIJRZKmdYmNxqZ9Va5aieFdwq5dNZ6mQXWaLsnxec4W1hk1mopldX3KmllBpkaNyWpKTZGWDq4pPa4CymE5fh6OCVnOnj1hsmp51WWyqmVlmmJRwY3Gtklptj6p5WWyPq4JSbKqLUGuCrZ5Van+pmVBllJptZIigeV51o5NdaZGgbmR3oJ1gZ3Wok1Fpi6WIVmeemmVpk5xzYnScmVtroZFdbXSTrmpqdoqoa1+JlXRgcqOUXWuFo4tTaaCTYG6ZkmlpdY2thVRxo4RWbX6llWFsf6aSUWySimdrmZBobYSkgmF0mJVmaoGkiVNpjaB9YG6Mp3lldJuRXmyHn4RYbIqlgl52oIlbbIqcgmFyoI9bcJaNZm2WkWhslo5tbH+jiFtuhqGEYHCUlW9lgpl9Y3GJqIhabI+Yc2p9mYpdepp/Y32ed2d0iqd6YXOVkWlsiJJxbXaFrIVdbYuWcWyGk4BhcJeTaXN+jplra3qUk2Vsgpl/ZXiUi2pxf6CLYW2ImHtpfpqKXm+LlXtpd5iPam6HknppdpmPbHF0kZFpb3yZh11yloZmdXyUlm1we5eKYHB8mI5pcH2ahWZ0fpqRbG9zjZZudHqFnnNvgA==";class I{constructor(e){t(this,"props");t(this,"spriteWidth");t(this,"spriteHeight");t(this,"frame",0);t(this,"currentDirection","right");t(this,"invaderDeath");t(this,"moveLeft",()=>this.props.x-=this.props.speed);t(this,"moveRight",()=>this.props.x+=this.props.speed);t(this,"moveDown",()=>this.props.y+=this.props.height);t(this,"updateInvader",e=>{const{gameFrame:i}=this.props.game;if(this.currentDirection!=e){this.moveDown(),this.currentDirection=e;return}e==="left"&&this.moveLeft(),e==="right"&&this.moveRight(),i%this.props.animationSpeed===0&&(this.frame>0?this.frame=0:this.frame++)});t(this,"fire",()=>new S({height:10,width:2,speed:10,x:this.props.x+this.props.width/2-2,y:this.props.y,color:"white",direction:"down",game:this.props.game}));t(this,"draw",()=>{const{context:e}=this.props.game.props;this.props.image&&e.drawImage(this.props.image,this.frame*this.spriteWidth,0,this.spriteWidth,this.spriteHeight,this.props.x,this.props.y,this.props.width,this.props.height)});this.props=e,this.spriteWidth=57,this.spriteHeight=38,this.invaderDeath=new Audio(H)}}const P="data:audio/wav;base64,UklGRm4EAABXQVZFZm10IBAAAAABAAEAESsAABErAAABAAgAZGF0YUoEAACFhYCFgICFhYuFgIWFhYWFgIWFgIWAhYWFemNNNh8UCQ8aKzxYY4CLobjJ2uXw9v///////////Pzw6+Daz8m+uKecloWAenRpY1JSR0c8PDxHUl5YXmNYUkE2Kx8PAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAMPGiU2PE1SY296gIuWp62+ydTa5ev2//////////////////////////////////////////////////br5eDg1MnDuKGFb1I8KyUfJSs2QVJeaXR6hYuQlqGhoaehnJaWkIuAgHp0aWNSTUE2KyUaDwMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPGis8TV5vgIucrbLD1ODw/P///////////////////////////////////////////////////////////////OvPspaAb2NjaW96gIuWp7K+ycnU2uDg5eDg4NTUz8m+uK2hlouAemleWE1BNisaGg8AAAAAAAAAAAMJCQMDAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAw8aKzxHUmN0gIuWobK+ydTa5fb8/////////////////////////////////////////////////Pbw6+Da1MOti3pjTUdBQUdSXml0gIuWoa24vsPDycPJw8O+sq2noZaLgIB0aWNSRzwwJRoUCQAAAAAAAAAAAAAAAwMDAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPHys8R15jdICLnK24w8/g6/b///////////////////////////////////////////////////////////z88ODPrZCAaVhSWFJeb3qAkJytsr7Pz9Ta2uDg1M/Jvriyp5yWi4CAb2NYTUc2KyUaDwMAAAAAAAAAAAADCQkPCQMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPGis8R1hjdICLnKeyvs/a5fD8///////////////////////////////////////////////////////89vDl4NrUz8O+uLKtp5yWkIuFgICAenRvaWNeWFJNTU1HQUE8PDYwKyslJSslHyUfGh8aHxoaGhoaHx8fGh8fJSUfJSUfJSslKysrMCswNjY8Njw8QUdBR0dNTVJNUlJYWF5jaWNpaWlvb3R0dHp6dHqAgICFhYCFhYuFi5CQi5CWlpaclpycnJyhnKGnp6ehp62tp62nraetp62tra2yrbKtrbKtra2nra2nra2tp62traenoaehp6Gnoaehp6GcoZycnJaWnJaclpCQlpCQkIuQlpaQkJCLkIuFi5CLhYuLi4WAgIWAhYCFgICAgICAgICAenR0enRvb3RvdG9vdG9vdG90b290b2lvdG9vdG90b290b3RvaXQ=",j="data:audio/wav;base64,UklGRvoDAABXQVZFZm10IBAAAAABAAEAESsAABErAAABAAgAZGF0YdYDAAB6aVg8KxQPCRQfMEFeaYCQp7jD2uDr8Pb8//z8/Pb28Ovg2s/Jw7iyp6GQi4V6dGljWFJHQTY8QUFNUl5eWF5SRzwwJRoDAAAAAAAAAAAAAAAAAAAAAAAAAAAAAw8aHzA8R01eb3qAi5ansr7Jz9rg6/D////////////////////////////////////////////////26+vl4NTUycPDuLKnoZyWlouFgHp0b2ljXl5SUk1NQUE8KxQAAAAAAAAAAAAAAAAPGis8TVJjaXR0gICAgICAenRvaWNpXlhSTUE8MCslHxoUDwkDAwAAAAMJGiUwMDAwKyUaDwkAAAAAAAAAAAAAAAAAAAAAAAAAAw8aJTA8R1hpdICLlqeyw8/a6/b////////////////////////////////////////////////////////////////////88PDr4NTPw8O4raehnJaLhYWAgHRvaWleWEcrDwAAAAAAAAAAAAAJGiU2R1JeaW90dHp6eoB6enR0b29jWFJNR0E2KysfFA8DAAAAAAAAAAAAAAMJDxQPFAkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADDxorNkdYY296hZahrb7J1ODr9v////////////////////////////////////////////////////////////bw6+Da1M/JvriyraecnJaLgICAenRvaWNeXlhBKw8AAAAAAAAAAAMPHzBBUl5pdICFi5CWlpCWkIuLhYB0b2NeUlJNPDYwKyUaDw8JAwAAAAAAAw8aHysrJSUfFA8DAAAAAAAAAAAAAAAAAAAAAAAAAAAAAw8fKzBBTV5peoCQnKe4w8/a5fD8///////////////////////////////////////////////////////////89uvl4NrUz8nDuLKyrZyWlouAgIB6dG9jXlhYUk1HR0E8NjArMCslHxofGhoaGhQUDw8JDwkPCQ8JDw8PCQ8PDxQaFBoUGh8aHx8fHyUlKysrMDYwNjw2PDxBR0FHTUdNUlJYXlheY2NpY2lpb290dHqAgICAgICAhYCFi4uFi4uQlpCWnJaclpyhnKGcoaGhoaehp62nra2tp62tsq2yrbKtrbKtrbKtrbKtsq2tsq2yraenraetp6Ghp6GnoaGhp6GcoaGhnJacnJyclpycnJaQkJaQlpCWkIuQi5CQi5CLhYuLi4WLhYWFi4WFgIWAgICAgICAgIB0enR6dG90dG9vdG90b3Rvb3RvdG9vdG90b29v",F="data:audio/wav;base64,UklGRjYEAABXQVZFZm10IBAAAAABAAEAESsAABErAAABAAgAZGF0YRIEAACAgHReRzYfFAkUHzBBWGmAi6Gyvs/a5fD8/Pz///z8/PDw5eDUz8m4uK2hlpCAgHpvY15STUE8NjZHR1JYXl5eUk1BPCUfDwAAAAAAAAAAAAAAAAAAAAAAAAAAAwkUGis2QUdYY3R6hZCcp7K4w8/a5ev2/P////////////////////////////////////////////z28Ovg2trPycO+uLKtp6GckIuQhYCAenR0aWleXlhSTU1BQTw8NjYwKyslJR8fGhoPAwAAAAAAAAAAAAAAAAAUJTZHUl5pb3qAhYWLhYuLi4WLgICAdHRvb2NYXlJNR0E8PDArJR8lKzZHTVheXlhYTUc8NisfFA8DAAAAAAAAAAAAAAMDDxQfKzA8R1Jjb3qAi5ansr7J1ODr9v////////////////////////////////////////////////////////////////zw6+Da2s/Jw76ysqeclpCLhYB6dHRpY15eUkdNRzw2NjArJR8aGhoUDwMAAAAAAAAAAAAAAAAAAA8fMDxNWF5jaXR0enqAenp0dG9pY15YUk1BPDYwMCUfGhQPCQMAAwAJGh8rMDYwMCsfGg8DAAAAAAAAAAAAAAAAAAAAAAAAAAAPFB8rNkFSXml6gJCcp7i+z9rl8Pz////////////////////////////////////////////////////////////88Ovl4NrPycO+uLKyp6GckIuFgIWAdG9vaV5YTUdBPDw2NjAwKyslHxoUAwAAAAAAAAAAAAAAAA8aMEFSXm96gICFhYuLkIuQi4uFgIB0dG9jXlhSUkc8NjArJR8aFBoUGiswPEFBQUdBNjArHxQJAwAAAAAAAAAAAAAAAAAAAAAJFBorMDxNWGl0gIWQoa2+ydTa5fD8//////////////////////////////////////////////////////////z28Ovg2tTJw7i4sqehnJaQi4CAgHR0b2NjXlhSUk1NQTw2NjArKyUfHxoUGhQPDxQPDw8PCQkJCQ8JCQ8JAwkPDwkPCQ8PFA8UGhoUHx8fJR8lJSsrMDYwNjY8PEFBR0dNTVJSWFheY15jaWlvdG90dHp6gICAhYCFi4WLkIuQkJacnJyWnKGcoZyhoaenraenraetraenra2yrbKtsrKtsrKtsq2ysq2tsq2yuLK4sq2ysq2yrbKyra2ysq2nrbKtp6etp62noaehoZyWlpyWkJCWkJCWkIuLkIuQi5CLhYWFi4WLhYCFhYCAhYCFgIWAhYCAgICAgICAgICAgIB6gHqAenp6dHp0dHp6dHp0b3R0b290b3RvdG9vb3RvdG90b290b29vb290",z="data:audio/wav;base64,UklGRkIEAABXQVZFZm10IBAAAAABAAEAESsAABErAAABAAgAZGF0YR4EAACAgIWFgIWAdF5HNh8UDxQfNkdYb4CWobjJ2uDw8Pz////////89vbr5drUycO4raGckIuAem9pXlJNR0E2PEFNUl5eXlhYRzwwJRQJAAAAAAAAAAAAAAAAAAAAAAAAAAAAAxQfKzY8TV5pdHqFkJyhsr7D1Nrl8Pb////////////////////////////////////////////////28Ovr4NTPycO4uK2toZyWkIWAgHp6dGlpY15YWE1NQUE8PDArHx8aGhQaFA8UDw8PCQkPCQkJCQMDCQkJAwAAAAAAAAAAAAAAAAAPJTZNXm+AhZCcoa2tuL6+uL64uLitraennJyQhYCAenpvaV5eWE1HR01YY296eoB6dG9pXlJHPDAlHx8UDwkJAwMDCQMPFBQfJSs2QU1YY296gJCcobK+w9Tg5fD8/////////////////////////////////////////////////////////////Pbr5drUz8m+vrKnoZyQi4CAenRvY15YUk1HQTw8NjArKx8fGhoUDwkJAwADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFCU8TV5pdICAhYuQlpaclpaQkIuFgIB6dG9pY15YUk1HQTwwMCsrKzZBTV5eY2NeWE1BNisfGg8DAAAAAAAAAAAAAAAAAwkUGiUwPE1SXm96gIuWp7K+ydrl8Pb////////////////////////////////////////////////////////////89vDr5drUz8nDuLKtoZyWkJCFgIB0b2lpY1hSUk1HQTw2NjArKyUfHxoaFBQPFAkJCQkJAwMDAAADAAMAAAADAAMAAwkDCQ8JDxQPFBQaHxofJSslKzA2NjA2PDxBQUdHTU1SWF5YWF5jaWlvb3R6enSAgICAhYCFi5CQi5CQlpCWlpyWnJyhoaenp6etp62tsrKyrbKtsriyuLK4uLi+uLi4uLi+uL64vr64uL64vriysriyuLi4srKtsq2tsq2np62nra2nraehoaehp6GcoZycnJyWnJaclpCQlpCQi5CLhYWLhYWLhYWAhYCAgICAgICAgICAgICAenqAeoB6gHp0dHp0enRvdHRvb3Rvb3RvaW9vaW9pb2lpaWljaWNpY2ljaW9pb29paWljaWlpY2lpY2lvaW9paW9vaW9pb29vdHRvdG90dG90b290b3R0dHR6dHR6dHp6dHR6dHp0b3RvdHR0enp0enR6dHqAeoCAgHqAgICAgICAgICAgICFgIWFgICFhYCFi4uFi4WLkIuFi5CLhYuLi5CLi5CQi5CQi5CQi4uQi5CQi4uQi5CLkIuQi5CQi5CLi4uLi5CLkJCLkJCLi5CLkJCLkIuLkJCLkIuQi4uL",K="/space-invaders/assets/invader1-y-Esrj8m.png",V="/space-invaders/assets/invader2-3--_PfJaBe.png",X="/space-invaders/assets/invader3-4-xt5MqcZj.png";class q{constructor(e){t(this,"props");t(this,"invadersCount",55);t(this,"invader1",new Image);t(this,"invader2_3",new Image);t(this,"invader3_4",new Image);t(this,"animationSpeed",70);t(this,"livingInvaders",[]);t(this,"speed",5);t(this,"currentDirection");t(this,"moveSounds");t(this,"moveCount",0);t(this,"updateDirection",()=>{const{game:e}=this.props,i=this.livingInvaders.some(o=>o.props.x<=5),s=this.livingInvaders.some(o=>o.props.x+o.props.width+5>=e.props.gameWidth);i&&(this.currentDirection="right"),s&&(this.currentDirection="left")});t(this,"createInvaders",()=>{const{game:e}=this.props,i=32,s=24,o=20,A=30,n=30,h=[];for(let a=0;a<this.invadersCount;a++){const l=a%11*(i+o-5)+n,c=Math.floor(a/11)*(s+o)+A;if(a<11){const p=new I({x:l,y:c,width:i,height:s,speed:this.speed,image:this.invader1,animationSpeed:this.animationSpeed,game:e,points:30});h.push(p)}if(a<33&&a>=11){const p=new I({x:l,y:c,width:i,height:s,speed:this.speed,image:this.invader2_3,animationSpeed:this.animationSpeed,game:e,points:20});h.push(p)}if(a<55&&a>=33){const p=new I({x:l,y:c,width:i,height:s,speed:this.speed,image:this.invader3_4,animationSpeed:this.animationSpeed,game:e,points:10});h.push(p)}}this.livingInvaders=h});t(this,"updateInvaders",()=>{const{game:e}=this.props,i=this.livingInvaders.length;let s=!1;if(this.animationSpeed>0&&(i<44&&this.animationSpeed!=35&&this.speed!=6&&(this.speed=6,this.animationSpeed=35,s=!0),i<33&&this.animationSpeed!=20&&this.speed!=7&&(this.speed=7,this.animationSpeed=20,s=!0),i<22&&this.animationSpeed!=10&&this.speed!=8&&(this.speed=8,this.animationSpeed=10,s=!0),i<11&&this.animationSpeed!=8&&this.speed!=10&&(this.speed=10,this.animationSpeed=8,s=!0),i===1&&this.animationSpeed!=4&&this.speed!=11&&(this.speed=20,this.animationSpeed=4,s=!0),s&&(this.livingInvaders.forEach(o=>{o.props.speed=this.speed,o.props.animationSpeed=this.animationSpeed}),s=!1)),this.livingInvaders.length>0&&e.gameFrame%this.animationSpeed===0&&(this.updateDirection(),this.livingInvaders.forEach(o=>{o.updateInvader(this.currentDirection)}),this.moveCount>=3?this.moveCount=0:this.moveCount++,e.playSound&&this.moveSounds[this.moveCount.toString()].play()),this.livingInvaders.length>0&&e.gameFrame%this.animationSpeed===0){const o=Math.floor(Math.random()*this.livingInvaders.length);e.gameFrame%25===0&&e.projectiles.invader.length<3&&e.projectiles.invader.push(this.livingInvaders[o].fire())}this.livingInvaders.some(o=>o.props.y>550)&&(e.gameService.setGameOverMessage("Invaders have reached the ground! You lose!"),e.gameService.setGameOver(!0)),this.livingInvaders.length===0&&(e.gameService.setGameOverMessage("You win!"),e.gameService.setGameOver(!0),this.speed=6,this.animationSpeed=35,e.shields.shieldArray=[],e.shields.createShields(e.props.gameWidth),e.invaders.createInvaders())});t(this,"draw",()=>{this.livingInvaders.forEach(e=>e.draw())});t(this,"destroy",()=>{this.invadersCount=0,this.livingInvaders=[]});this.props=e,this.invader1.src=K,this.invader2_3.src=V,this.invader3_4.src=X,this.currentDirection="right",this.moveSounds={0:new Audio(P),1:new Audio(j),2:new Audio(F),3:new Audio(z)},this.createInvaders()}}class _{constructor(e){t(this,"props");t(this,"defender");t(this,"invader");t(this,"defenderProjectilesToRemove");t(this,"invaderProjectilesToRemove");t(this,"update",()=>{this.checkOutOfBounds(),this.defender.forEach(e=>e.update()),this.invader.forEach(e=>e.update())});t(this,"draw",()=>{this.defender.forEach(e=>e.draw()),this.invader.forEach(e=>e.draw())});t(this,"checkOutOfBounds",()=>{var i;const{gameHeight:e}=this.props.game.props;this.defenderProjectilesToRemove=[],this.invaderProjectilesToRemove=[],this.defender.forEach((s,o)=>{s.props.y<0&&this.defenderProjectilesToRemove.push({index:o})}),this.invader.forEach((s,o)=>{s.props.y>e&&this.invaderProjectilesToRemove.push({index:o})}),(this.invaderProjectilesToRemove.length>0||this.defenderProjectilesToRemove.length>0)&&((i=this.defenderProjectilesToRemove)==null||i.forEach(s=>this.defender.splice(s.index,1)),this.invaderProjectilesToRemove.forEach(s=>this.invader.splice(s.index,1)))});this.props=e,this.defender=[],this.invader=[],this.defenderProjectilesToRemove=[],this.invaderProjectilesToRemove=[]}}class m{constructor(e){t(this,"props");t(this,"allParticles",{});t(this,"getShape",()=>{const{x:e,y:i}=this.props,s=[{x:e+0,y:i+0},{x:e+0,y:i-40},{x:e+18.1,y:i-60},{x:e+51.5,y:i-60},{x:e+68.1,y:i-40},{x:e+68.1,y:i+0},{x:e+51.5,y:i+0},{x:e+51.5,y:i-8},{x:e+44.8,y:i-18},{x:e+24.8,y:i-18},{x:e+18.1,y:i-8},{x:e+18.1,y:i+0}];let o=1/0,A=-1/0;s.forEach(n=>{o=Math.min(o,n.y),A=Math.max(A,n.y)});for(let n=o;n<=A;n++){const h=[];for(let a=0;a<s.length;a++){const l=s[a],c=s[(a+1)%s.length];if(l.y<=n&&n<c.y||c.y<=n&&n<l.y){const p=(l.x*(c.y-n)+c.x*(n-l.y))/(c.y-l.y);h.push(p)}}h.sort((a,l)=>a-l);for(let a=0;a<h.length;a+=2){const l=Math.ceil(h[a]),c=Math.floor(h[a+1]);for(let p=l;p<=c;p++)this.allParticles[`${p}x${n}`]=!0}}});this.props=e,this.getShape()}}class ${constructor(e){t(this,"shieldArray",[]);t(this,"props");t(this,"allParticles",{});t(this,"explosionRadius",2);t(this,"explosionHeight",5);t(this,"explosionChance",.5);t(this,"offScreenCanvas");t(this,"offScreenContext");t(this,"createShields",e=>{const{game:i}=this.props,s=68,o=(e-4*s)/5;this.shieldArray.push(new m({x:o,y:500,game:i})),this.shieldArray.push(new m({x:o+s+o,y:500,game:i})),this.shieldArray.push(new m({x:o+2*s+2*o,y:500,game:i})),this.shieldArray.push(new m({x:o+3*s+3*o,y:500,game:i})),this.shieldArray.forEach(A=>{this.allParticles={...this.allParticles,...A.allParticles}}),this.allParticles});t(this,"destroy",()=>{this.shieldArray=[]});this.props=e,this.createShields(e.game.props.gameWidth),this.offScreenCanvas=document.createElement("canvas"),this.offScreenCanvas.width=e.game.props.gameWidth,this.offScreenCanvas.height=e.game.props.gameHeight,this.offScreenContext=this.offScreenCanvas.getContext("2d"),this.drawParticles()}draw(){const{context:e}=this.props.game.props;e.drawImage(this.offScreenCanvas,0,0)}drawParticles(){var e;(e=this.offScreenContext)==null||e.clearRect(0,0,this.offScreenCanvas.width,this.offScreenCanvas.height),Object.keys(this.allParticles).flatMap(i=>{if(this.allParticles[i]){const[s,o]=i.split("x");this.offScreenContext&&(this.offScreenContext.fillStyle="#00d300",this.offScreenContext.fillRect(parseInt(s),parseInt(o),1,1))}})}}class ee{constructor(e){t(this,"props");t(this,"handleCollision",()=>{const{projectiles:e,defender:i}=this.props.game,{game:s}=this.props;e.invader.some(o=>o.props.y>s.props.gameHeight-500)&&e.invader.forEach(o=>{const{x:A,y:n,width:h,height:a}=o.props;A<i.x+i.width&&A+h>i.x&&n<i.y+17+(i.height-23)&&n+a>i.y+17&&i.lives>0&&(i.isCollided=!0,i.lives--,e.invader.splice(e.invader.indexOf(o),1),i.previousAnimationSpeed=i.props.game.invaders.animationSpeed,i.props.game.invaders.animationSpeed=0,i.props.game.playSound&&i.defenderDeath.play())})});this.props=e}}class te{constructor(e){t(this,"props");t(this,"handleCollision",()=>{const e=[],i=[],{game:s}=this.props,{invaders:o}=this.props.game;if(o.livingInvaders.forEach((A,n)=>{s.projectiles.defender.forEach((h,a)=>{h.props.x>A.props.x&&h.props.x<A.props.x+A.props.width&&h.props.y>A.props.y&&h.props.y<A.props.y+A.props.height&&(e.push({index:a}),i.push({index:n}),s.scoreService.score+=A.props.points)})}),e.length>0||i.length>0){for(let A=i.length-1;A>=0;A--){const n=o.livingInvaders[i[A].index].props.x,h=o.livingInvaders[i[A].index].props.y;s.explosions.add(n,h),s.playSound&&o.livingInvaders[i[A].index].invaderDeath.play(),o.livingInvaders.splice(i[A].index,1)}for(let A=e.length-1;A>=0;A--)s.projectiles.defender.splice(e[A].index,1)}});this.props=e}}class ie{constructor(e){t(this,"props");this.props=e}handleCollision(){const{projectiles:e,invaders:i,shields:s}=this.props.game,o=[],A=[];e.defender.forEach((n,h)=>{const a=n.props.x,l=n.props.x+n.props.width,c=n.props.y,p=n.props.y+n.props.height;this.collideWithShield(a,l,c,p,!0)&&(o.push({index:h}),s.drawParticles())}),e.invader.forEach((n,h)=>{const a=n.props.x,l=n.props.x+n.props.width,c=n.props.y,p=n.props.y+n.props.height;this.collideWithShield(a,l,c,p,!0)&&(A.push({index:h}),s.drawParticles())}),i.livingInvaders.forEach(n=>{const h=n.props.x,a=n.props.x+n.props.width,l=n.props.y,c=n.props.y+n.props.height;this.collideWithShield(h,a,l,c,!1)&&s.drawParticles()}),o==null||o.forEach(n=>e.defender.splice(n.index,1)),A.forEach(n=>e.invader.splice(n.index,1))}collideWithShield(e,i,s,o,A){const{shields:n}=this.props.game;let h=!1;for(let a=e;a<=i;a++)for(let l=s;l<=o;l++){const c=`${a}x${l}`;n.allParticles[c]&&(n.allParticles[c]=!1,h=!0)}if(h&&A){const a=e-n.explosionRadius,l=i+n.explosionRadius,c=s-n.explosionHeight,p=o+n.explosionHeight;for(let u=a;u<=l;u++)for(let y=c;y<=p;y++){const x=`${u}x${y}`;n.allParticles[x]&&n.explosionChance>Math.random()&&(n.allParticles[x]=!1)}}return h}}class se{constructor(e){t(this,"props");t(this,"shields");t(this,"defender");t(this,"invaders");this.props=e,this.shields=new ie(e),this.defender=new ee(e),this.invaders=new te(e)}handleCollisions(){const{game:e}=this.props;e.shieldsOn&&this.shields.handleCollision(),e.godMode||this.defender.handleCollision(),this.invaders.handleCollision()}}class b{constructor(e){t(this,"props");t(this,"gameFrame",0);t(this,"inputHandler");t(this,"defender");t(this,"invaders");t(this,"shields");t(this,"projectiles");t(this,"explosions");t(this,"playSound",!1);t(this,"godMode");t(this,"shieldsOn");t(this,"gameService");t(this,"livesService");t(this,"scoreService");t(this,"collisionService");t(this,"update",()=>{this.projectiles.update(),this.invaders.updateInvaders(),this.defender.update(),this.collisionService.handleCollisions()});t(this,"draw",()=>{const{context:e,gameWidth:i,gameHeight:s}=this.props;this.gameFrame++,e.clearRect(0,0,i,s),this.projectiles.draw(),this.invaders.draw(),this.defender.draw(),this.explosions.draw(),this.shieldsOn&&this.shields.draw(),this.scoreService.drawHighscore(),this.livesService.drawLives()});t(this,"setGameSize",(e,i)=>{this.props.gameWidth=e,this.props.gameHeight=i});t(this,"destroy",()=>{this.inputHandler.destroy(),this.invaders.destroy(),this.shields.destroy(),this.defender.destroy()});this.props=e,this.godMode=e.godMode,this.shieldsOn=e.shieldsOn,this.inputHandler=new T(this),this.shields=new $({game:this}),this.invaders=new q({game:this}),this.defender=new U({game:this}),this.projectiles=new _({game:this}),this.explosions=new Z({game:this}),this.gameService=new G({game:this}),this.livesService=new B({defender:this.defender,context:e.context,gameWidth:e.gameWidth}),this.scoreService=new L({context:e.context}),this.collisionService=new se({game:this}),this.shields.draw()}}let d,C;const v=600,f=600;document.addEventListener("DOMContentLoaded",()=>{const r=document.querySelector("#game-canvas");if(r.addEventListener("click",R),r){const e=r.getContext("2d");r.width=v,r.height=f,e&&(d=new b({context:e,gameWidth:v,gameHeight:f,godMode:!1,shieldsOn:!0}),C=new Y({game:d}),w())}});const R=()=>{if(d!=null&&d.gameService.isGameOver){const r=document.querySelector("#game-canvas");if(r.addEventListener("click",R),r){const e=r.getContext("2d");if(r.width=v,r.height=f,e){let i=d.scoreService.score;d.gameService.gameOverMessage!=="You win!"&&(i=0),d.destroy(),d=new b({context:e,gameWidth:v,gameHeight:f,godMode:d.godMode,shieldsOn:d.shieldsOn}),d.scoreService.score=i,C&&(C.props.game=d),w()}}}},w=()=>{if(d==null||d.update(),d==null||d.draw(),d!=null&&d.gameService.isGameOver){d==null||d.gameService.drawGameOver();return}requestAnimationFrame(w)};window.addEventListener("beforeunload",()=>{d==null||d.destroy()});
